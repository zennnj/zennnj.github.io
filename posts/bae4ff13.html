<!DOCTYPE html>
<html lang="zh-CN">
    <!-- title -->
<!-- keywords -->
<head><!-- hexo injector head_begin start --><link href="https://fastly.jsdelivr.net/npm/hexo-tag-common@0.2.0/css/index.css" rel="stylesheet"/><!-- hexo injector head_begin end -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="author" content="">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="">
        <meta name="keywords" content="hexo,hexo-theme,hexo-blog">
    <meta name="description" content="">
    <meta name="description" content="å­¦">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis">
<meta property="og:url" content="http://example.com/posts/bae4ff13.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="å­¦">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/images/Redis/image.png">
<meta property="article:published_time" content="2025-04-30T06:44:00.000Z">
<meta property="article:modified_time" content="2025-11-25T03:18:09.114Z">
<meta property="article:tag" content="learn">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/Redis/image.png">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="icon" href="/assets/my.ico">
    <title>Redis Â· Terminal 4</title>
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
    (function (w) {
        'use strict'
        // rel=preload support test
        if (!w.loadCSS) {
            w.loadCSS = function () {}
        }
        // define on the loadCSS obj
        var rp = (loadCSS.relpreload = {})
        // rel=preload feature support test
        // runs once and returns a function for compat purposes
        rp.support = (function () {
            var ret
            try {
                ret = w.document.createElement('link').relList.supports('preload')
            } catch (e) {
                ret = false
            }
            return function () {
                return ret
            }
        })()

        // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
        // then change that media back to its intended value on load
        rp.bindMediaToggle = function (link) {
            // remember existing media attr for ultimate state, or default to 'all'
            var finalMedia = link.media || 'all'

            function enableStylesheet() {
                link.media = finalMedia
            }

            // bind load handlers to enable media
            if (link.addEventListener) {
                link.addEventListener('load', enableStylesheet)
            } else if (link.attachEvent) {
                link.attachEvent('onload', enableStylesheet)
            }

            // Set rel and non-applicable media type to start an async request
            // note: timeout allows this to happen async to let rendering continue in IE
            setTimeout(function () {
                link.rel = 'stylesheet'
                link.media = 'only x'
            })
            // also enable media after 3 seconds,
            // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
            setTimeout(enableStylesheet, 3000)
        }

        // loop through link elements in DOM
        rp.poly = function () {
            // double check this to prevent external calls from running
            if (rp.support()) {
                return
            }
            var links = w.document.getElementsByTagName('link')
            for (var i = 0; i < links.length; i++) {
                var link = links[i]
                // qualify links to those with rel=preload and as=style attrs
                if (
                    link.rel === 'preload' &&
                    link.getAttribute('as') === 'style' &&
                    !link.getAttribute('data-loadcss')
                ) {
                    // prevent rerunning on link
                    link.setAttribute('data-loadcss', true)
                    // bind listeners to toggle media back
                    rp.bindMediaToggle(link)
                }
            }
        }

        // if unsupported, run the polyfill
        if (!rp.support()) {
            // run once at least
            rp.poly()

            // rerun poly on an interval until onload
            var run = w.setInterval(rp.poly, 500)
            if (w.addEventListener) {
                w.addEventListener('load', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            } else if (w.attachEvent) {
                w.attachEvent('onload', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            }
        }

        // commonjs
        if (typeof exports !== 'undefined') {
            exports.loadCSS = loadCSS
        } else {
            w.loadCSS = loadCSS
        }
    })(typeof global !== 'undefined' ? global : this)
</script>

    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .footer-fixed-btn,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(
            -45deg,
            #444 0,
            #444 80px,
            #333 80px,
            #333 160px
        );
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s infinite;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }
</style>

    <link id="stylesheet-fancybox" rel="preload" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.36/dist/fancybox/fancybox.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link id="stylesheet-base" rel="preload" href="/css/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link id="stylesheet-mobile" rel="preload" href="/css/mobile.css" as="style" onload="this.onload=null;this.rel='stylesheet';this.media='screen and (max-width: 960px)'">
    <link id="stylesheet-theme-dark" rel="preload" href="/css/dark.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" as="script">
    <link rel="preload" href="/scripts/main.js" as="script">
    <link rel="preload" href="/font/Oswald-Regular.ttf" as="font" crossorigin>
    <link rel="preload" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" as="font" crossorigin>
    <!-- algolia -->
    <!-- ç™¾åº¦ç»Ÿè®¡  -->
    <!-- è°·æ­Œç»Ÿè®¡  -->
    <!-- Google tag (gtag.js) -->
<style type="text/css">
.spoiler {
  display: inline;
}
p.spoiler {
  display: flex;
}
.spoiler a {
  pointer-events: none;
}
.spoiler-blur, .spoiler-blur > * {
  transition: text-shadow .5s ease;
}
.spoiler .spoiler-blur, .spoiler .spoiler-blur > * {
  color: rgba(0, 0, 0, 0);
  background-color: rgba(0, 0, 0, 0);
  text-shadow: 0 0 10px grey;
  cursor: pointer;
}
.spoiler .spoiler-blur:hover, .spoiler .spoiler-blur:hover > * {
  text-shadow: 0 0 5px grey;
}
.spoiler-box, .spoiler-box > * {
  transition: color .5s ease,
  background-color .5s ease;
}
.spoiler .spoiler-box, .spoiler .spoiler-box > * {
  color: black;
  background-color: black;
  text-shadow: none;
}</style><meta name="generator" content="Hexo 7.3.0"></head>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ == undefined) {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js" />')
        }
    </script>
        <body class="post-body">
        <!-- header -->
        <header class="header header-mobile">
    <!-- top read progress line -->
    <div class="header-element">
        <div class="read-progress"></div>
    </div>
    <!-- sidebar menu button -->
    <div class="header-element">
        <div class="header-sidebar-menu">
            <div style="padding-left: 1px;">&#xe775;</div>
        </div>
    </div>
    <!-- header actions -->
    <div class="header-actions">
        <!-- theme mode switch button -->
        <span class="header-theme-btn header-element">
            <i class="fas fa-adjust"></i>
        </span>
        <!-- back to home page text -->
        <span class="home-link header-element">
            <a href="/">Terminal 4.</a>
        </span>
    </div>
    <!-- toggle banner -->
    <div class="banner">
        <div class="blog-title header-element">
            <a href="/">Terminal 4.</a>
        </div>
        <div class="post-title header-element">
            <a href="#" class="post-name">Redis</a>
        </div>
    </div>
</header>

        <!-- fixed footer -->
        <footer class="footer-fixed">
    <!-- donate button -->
    <div class="donate-popup donate-popup--hidden">
    <div class="donate-popup__title">Buy Me A Milktea!</div>
    <div class="donate-popup__content">
        <div class="donate-popup__content-description">If this post helped you, please consider buying the author a cup of milktea ğŸ¥¤!(Actually,I prefer fruit tea.ğŸ¥³)</div>
        <img
            class="donate-popup__content-qrCode"
            title="Wechat"
            alt="Wechat"
            src="/assets/donate-wechat.png"
        ></img>
        <img
            class="donate-popup__content-qrCode"
            title="Alipay"
            alt="Alipay"
            src="/assets/donate-alipay.jpg"
        ></img>
    </div>
</div>

    <div
        title="Donate to the author"
        class="footer-fixed-btn footer-fixed-btn--hidden donate-btn"
    >
        <i class="fas fa-donate"></i>
    </div>

    <!-- back to top button -->
    <div class="footer-fixed-btn footer-fixed-btn--hidden back-top">
        <div>&#xe639;</div>
    </div>
</footer>

        <!-- wrapper -->
        <div class="wrapper">
            <div class="site-intro" style="    height:50vh;
">
    <!-- ä¸»é¡µ  -->
    <!-- 404é¡µ  -->
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/intro/post-bg.jpg)"></div>
    <div class="site-intro-meta">
        <!-- æ ‡é¢˜  -->
        <h1 class="intro-title">
            <!-- ä¸»é¡µ  -->
                Redis
            <!-- 404 -->
        </h1>
        <!-- å‰¯æ ‡é¢˜ -->
        <p class="intro-subtitle">
            <!-- ä¸»é¡µå‰¯æ ‡é¢˜  -->
            <!-- 404 -->
        </p>
        <!-- æ–‡ç« é¡µ meta -->
            <div class="post-intros">
                <!-- æ–‡ç« é¡µæ ‡ç­¾  -->
                    <div class="post-intro-tags" >
        <a class="post-tag" href="javascript:void(0);" data-tags="learn">learn</a>
</div>

                <!-- æ–‡ç« å­—æ•°ç»Ÿè®¡ -->
                <div class="post-intro-meta">
                    <!-- æ’°å†™æ—¥æœŸ -->
                    <span class="iconfont-archer post-intro-calander">&#xe676;</span>
                    <span class="post-intro-time">2025/04/30</span>
                    <!-- busuanzi -->
                        <span id="busuanzi_container_page_pv" class="busuanzi-pv">
                            <span class="iconfont-archer post-intro-busuanzi">&#xe602;</span>
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    <!-- æ–‡ç« åˆ†äº« -->
                    <span class="share-wrapper">
                        <span class="iconfont-archer share-icon">&#xe71d;</span>
                        <span class="share-text">Share</span>
                        <ul class="share-list">
                            <li class="iconfont-archer share-qr" data-type="qr">&#xe75b;
                                <div class="share-qrcode"></div>
                            </li>
                            <li class="iconfont-archer" data-type="weibo">&#xe619;</li>
                            <li class="iconfont-archer" data-type="qzone">&#xe62e;</li>
                            <li class="iconfont-archer" data-type="twitter">&#xe634;</li>
                            <li class="iconfont-archer" data-type="facebook">&#xe67a;</li>
                        </ul>
                    </span>
                </div>
            </div>
    </div>
</div>

            <script>
  // get user agent
  function getBrowserVersions() {
    var u = window.navigator.userAgent
    return {
      userAgent: u,
      trident: u.indexOf('Trident') > -1, //IEå†…æ ¸
      presto: u.indexOf('Presto') > -1, //operaå†…æ ¸
      webKit: u.indexOf('AppleWebKit') > -1, //è‹¹æœã€è°·æ­Œå†…æ ¸
      gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //ç«ç‹å†…æ ¸
      mobile: !!u.match(/AppleWebKit.*Mobile.*/), //æ˜¯å¦ä¸ºç§»åŠ¨ç»ˆç«¯
      ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //iosç»ˆç«¯
      android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //androidç»ˆç«¯æˆ–è€…ucæµè§ˆå™¨
      iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //æ˜¯å¦ä¸ºiPhoneæˆ–è€…å®‰å“QQæµè§ˆå™¨
      iPad: u.indexOf('iPad') > -1, //æ˜¯å¦ä¸ºiPad
      webApp: u.indexOf('Safari') == -1, //æ˜¯å¦ä¸ºwebåº”ç”¨ç¨‹åºï¼Œæ²¡æœ‰å¤´éƒ¨ä¸åº•éƒ¨
      weixin: u.indexOf('MicroMessenger') == -1, //æ˜¯å¦ä¸ºå¾®ä¿¡æµè§ˆå™¨
      uc: u.indexOf('UCBrowser') > -1, //æ˜¯å¦ä¸ºandroidä¸‹çš„UCæµè§ˆå™¨
    }
  }
  var browser = {
    versions: getBrowserVersions(),
  }
  console.log('userAgent: ' + browser.versions.userAgent)

  // callback
  function fontLoaded() {
    console.log('font loaded')
    if (document.getElementsByClassName('site-intro-meta')) {
      document
        .getElementsByClassName('intro-title')[0]
        .classList.add('intro-fade-in')
      document
        .getElementsByClassName('intro-subtitle')[0]
        .classList.add('intro-fade-in')
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in')
      }
    }
  }

  // UCä¸æ”¯æŒè·¨åŸŸï¼Œæ‰€ä»¥ç›´æ¥æ˜¾ç¤º
  function asyncCb() {
    if (browser.versions.uc) {
      console.log('UCBrowser')
      fontLoaded()
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular'],
        },
        loading: function () {
          // æ‰€æœ‰å­—ä½“å¼€å§‹åŠ è½½
          // console.log('font loading');
        },
        active: function () {
          // æ‰€æœ‰å­—ä½“å·²æ¸²æŸ“
          fontLoaded()
        },
        inactive: function () {
          // å­—ä½“é¢„åŠ è½½å¤±è´¥ï¼Œæ— æ•ˆå­—ä½“æˆ–æµè§ˆå™¨ä¸æ”¯æŒåŠ è½½
          console.log('inactive: timeout')
          fontLoaded()
        },
        timeout: 5000, // Set the timeout to two seconds
      })
    }
  }

  function asyncErr() {
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0]
    o.src = u
    if (cb) {
      o.addEventListener(
        'load',
        function (e) {
          cb(null, e)
        },
        false
      )
    }
    if (err) {
      o.addEventListener(
        'error',
        function (e) {
          err(null, e)
        },
        false
      )
    }
    s.parentNode.insertBefore(o, s)
  }

  var asyncLoadWithFallBack = function (arr, success, reject) {
    var currReject = function () {
      reject()
      arr.shift()
      if (arr.length) async(arr[0], success, currReject)
    }

    async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack(
    [
      'https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js',
      'https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js',
      "/lib/webfontloader.min.js",
    ],
    asyncCb,
    asyncErr
  )
</script>

            <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" alt="loading">
            <div class="container container-unloaded">
                <main class="main post-page">
    <article class="article-entry">
        <link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>å­¦<br><span id="more"></span></p>
<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><ul>
<li><p>åŸºäºå†…å­˜å­˜å‚¨ï¼Œè¯»å†™æ€§èƒ½é«˜</p>
</li>
<li><p>é€‚åˆå­˜å‚¨çƒ­ç‚¹æ•°æ®ï¼ˆçƒ­ç‚¹å•†å“ã€èµ„è®¯ã€æ–°é—»ï¼‰</p>
</li>
<li><p>ä¼ä¸šåº”ç”¨å¹¿æ³›</p>
</li>
</ul>
<h2 id="REDIS-AND-MYSQL"><a href="#REDIS-AND-MYSQL" class="headerlink" title="REDIS AND MYSQL"></a>REDIS AND MYSQL</h2><p><strong>Redis åªèƒ½è¡¥å……æ•°æ®åº“ï¼Œè€Œä¸èƒ½å–ä»£æ•°æ®åº“</strong>ã€‚</p>
<p>æ—¢ç„¶ Redis å¾ˆå¿«ï¼Œèƒ½ä¸èƒ½æŠŠæ‰€æœ‰æ•°æ®éƒ½å­˜ Redis?</p>
<p>çœ‹ä¼¼åˆç†ï¼Œä½†å®é™…ä¸Š <strong>å®Œå…¨ä¸å¯è¡Œ</strong>ï¼ŒåŸå› éå¸¸å¤šï¼Œä¸‹é¢æŒ‰é‡è¦ç¨‹åº¦ä»å¼ºåˆ°å¼±è§£é‡Šï¼š</p>
<h3 id="â—1-Redis-çš„æ•°æ®ä¸å¯é ï¼Œä¸èƒ½ä¿è¯ä¸ä¸¢"><a href="#â—1-Redis-çš„æ•°æ®ä¸å¯é ï¼Œä¸èƒ½ä¿è¯ä¸ä¸¢" class="headerlink" title="â—1. Redis çš„æ•°æ®ä¸å¯é ï¼Œä¸èƒ½ä¿è¯ä¸ä¸¢"></a>â—1. Redis çš„æ•°æ®<strong>ä¸å¯é </strong>ï¼Œä¸èƒ½ä¿è¯ä¸ä¸¢</h3><p>Redis æ˜¯<strong>å†…å­˜æ•°æ®åº“</strong>ï¼Œè™½ç„¶æ”¯æŒæŒä¹…åŒ–ï¼ˆRDB / AOFï¼‰ï¼Œä½†ä»ç„¶å­˜åœ¨æ•°æ®ä¸¢å¤±é£é™©ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>æœºåˆ¶</th>
<th>é£é™©</th>
</tr>
</thead>
<tbody>
<tr>
<td>RDB å¿«ç…§</td>
<td>å´©æºƒåä¸¢å¤±æœ€åä¸€æ¬¡å¿«ç…§åçš„æ•°æ®</td>
</tr>
<tr>
<td>AOF æ—¥å¿—</td>
<td>é€Ÿåº¦å˜æ…¢ã€æŸåæ¢å¤å›°éš¾</td>
</tr>
<tr>
<td>æ–­ç”µ/é‡å¯</td>
<td>å†…å­˜æ•°æ®æ¸…ç©ºï¼ˆæ²¡é…ç½®æŒä¹…åŒ–å°±å…¨æ²¡äº†ï¼‰</td>
</tr>
</tbody>
</table>
</div>
<p>âš  <strong>è®¢å•ã€ç”¨æˆ·ä½™é¢ã€æ”¯ä»˜çŠ¶æ€ã€åº“å­˜ç­‰ä¸šåŠ¡</strong>ä»»ä½•ä¸€æ¡ä¸¢å¤±éƒ½ä¼šå¯¼è‡´ä¸¥é‡äº‹æ•…ã€‚<br> <strong>MySQL æ‰èƒ½ä¿è¯å¯é æŒä¹…åŒ–</strong>ã€‚</p>
<hr>
<h3 id="â—2-Redis-åŒæ ·å¯ä»¥å®•æœº-å´©æºƒ"><a href="#â—2-Redis-åŒæ ·å¯ä»¥å®•æœº-å´©æºƒ" class="headerlink" title="â—2. Redis åŒæ ·å¯ä»¥å®•æœº / å´©æºƒ"></a>â—2. Redis åŒæ ·å¯ä»¥å®•æœº / å´©æºƒ</h3><p>Redis æ˜¯å•çº¿ç¨‹ï¼Œè™½ç„¶æ€§èƒ½æé«˜ï¼Œä½†ä¸æ˜¯ä¸ä¼šæŒ‚ï¼š</p>
<ul>
<li>å¤§é‡é”®è¿‡æœŸè§¦å‘é›†ä¸­å›æ”¶å¡é¡¿</li>
<li>é›†ç¾¤é‡åˆ†ç‰‡ä¸å½“é€ æˆé˜»å¡</li>
<li>å†™å…¥é‡è¿‡å¤§å¯¼è‡´ AOF rewrite å¾ªç¯</li>
<li>ç¨‹åº Bug / å†…å­˜è€—å°½</li>
</ul>
<p>âš  å¦‚æœ<strong>è®¢å•ã€ç”¨æˆ·æ•°æ®å…¨éƒ¨åœ¨ Redis</strong>ï¼Œä¸€æ—¦æŒ‚æ‰ â†’ å…¨ç³»ç»Ÿç˜«ç—ªã€æ•°æ®å…¨éƒ¨ä¸¢å¤±ã€‚</p>
<p>è€Œ MySQL éå¸¸ç¨³å®šï¼Œé€‚åˆ<strong>æ ¸å¿ƒä¸šåŠ¡æ•°æ®çš„é•¿æœŸå­˜å‚¨</strong>ã€‚</p>
<hr>
<h3 id="â—3-å†…å­˜æˆæœ¬è¿œæ¯”ç¡¬ç›˜é«˜å¾—ç¦»è°±"><a href="#â—3-å†…å­˜æˆæœ¬è¿œæ¯”ç¡¬ç›˜é«˜å¾—ç¦»è°±" class="headerlink" title="â—3. å†…å­˜æˆæœ¬è¿œæ¯”ç¡¬ç›˜é«˜å¾—ç¦»è°±"></a>â—3. å†…å­˜æˆæœ¬è¿œæ¯”ç¡¬ç›˜é«˜å¾—ç¦»è°±</h3><p>å…¨éƒ¨æ”¾ Redis â†’ <strong>æˆæœ¬ææ€–åˆ°ä¸å¯èƒ½</strong><br> è€Œ MySQL åªè¦ç¡¬ç›˜ â†’ éå¸¸ä¾¿å®œã€‚</p>
<hr>
<h3 id="â—4-Redis-ç¼ºä¹å…³ç³»æŸ¥è¯¢èƒ½åŠ›"><a href="#â—4-Redis-ç¼ºä¹å…³ç³»æŸ¥è¯¢èƒ½åŠ›" class="headerlink" title="â—4. Redis ç¼ºä¹å…³ç³»æŸ¥è¯¢èƒ½åŠ›"></a>â—4. Redis ç¼ºä¹å…³ç³»æŸ¥è¯¢èƒ½åŠ›</h3><p>Redis ä¸»è¦æ˜¯ key-valueï¼š</p>
<ul>
<li>æ— å…³è”æŸ¥è¯¢</li>
<li>æ— äº‹åŠ¡çº§è”</li>
<li>æ—  join</li>
<li>æ— å¤æ‚æ£€ç´¢</li>
<li>æ— å¼ºä¸€è‡´æ€§</li>
</ul>
<p>ä¸¾ä¾‹ï¼š</p>
<blockquote>
<p>â€œæŸ¥è¿™ä¸ªç”¨æˆ·ä¸€å¹´å†…æ‰€æœ‰å·²å®Œæˆè®¢å•ä¸­è´­ä¹°æ¬¡æ•°æœ€å¤šçš„èœå“åˆ†ç±»â€</p>
</blockquote>
<p>Redis å®Œå…¨ä¸æ“…é•¿ã€‚<br> è¦ä¹ˆåœºæ™¯ä¸è¶³ä»¥å®ç°ï¼Œè¦ä¹ˆæ„å»ºæ•°æ®ç»“æ„æå…¶å¤æ‚ä¸”éš¾ç»´æŠ¤ã€‚</p>
<p>MySQL å°±ä¸€å¥ SQLã€‚</p>
<hr>
<h3 id="ğŸ“Œ-ä½¿ç”¨-Redisçš„åœºåˆ"><a href="#ğŸ“Œ-ä½¿ç”¨-Redisçš„åœºåˆ" class="headerlink" title="ğŸ“Œ ä½¿ç”¨ Redisçš„åœºåˆ"></a>ğŸ“Œ ä½¿ç”¨ Redisçš„åœºåˆ</h3><p>çœæµï¼š</p>
<blockquote>
<p><strong>Redis åŠ é€Ÿä¸šåŠ¡ï¼ŒMySQL æ‰æ˜¯ä¸šåŠ¡æ ¹åŸºã€‚<br> æ²¡æœ‰ MySQL çš„ç³»ç»Ÿå¯ä»¥æ´»ï¼Œä½†ä¸å«ç³»ç»Ÿï¼›<br> åªæœ‰ MySQL æ²¡æœ‰ Redis çš„ç³»ç»Ÿä¹Ÿèƒ½æ´»ï¼Œå°±æ˜¯æ…¢ä¸€ç‚¹ã€‚</strong></p>
</blockquote>
<p>éœ€è¦é•¿æœŸä¿å­˜ã€ä¸å¯ä¸¢å¤±çš„æ•°æ®-&gt;<strong>MySQL</strong><br>é«˜é¢‘è®¿é—®ã€ä¸´æ—¶æ€§ã€å¯ä¸¢æ•°æ®-&gt; <strong>Redis</strong><br>ä»¥ä¸‹åœºæ™¯ Redis ç”šè‡³æ˜¯ <strong>å”¯ä¸€é€‰æ‹©</strong>ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>åŸå› </th>
</tr>
</thead>
<tbody>
<tr>
<td>éªŒè¯ç </td>
<td>ä¸´æ—¶æ•°æ®</td>
</tr>
<tr>
<td>Token/Session</td>
<td>ä¼šè¿‡æœŸ</td>
</tr>
<tr>
<td>é™æµã€è®¡æ•°å™¨</td>
<td>é«˜é¢‘æ›´æ–°</td>
</tr>
<tr>
<td>æ’è¡Œæ¦œ</td>
<td>å†™å¤šè¯»å¤š</td>
</tr>
<tr>
<td>æŠ¢è´­åœºæ™¯åº“å­˜</td>
<td>æŠ¢ä¸åˆ°ä¹Ÿæ²¡äº‹ï¼Œä¸ç®—ä¸¥é‡ä¸¢å¤±</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h1 id="å®‰è£…é…ç½®"><a href="#å®‰è£…é…ç½®" class="headerlink" title="å®‰è£…é…ç½®"></a>å®‰è£…é…ç½®</h1><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/geekbruce/articles/18922198">å¦‚ä½•åœ¨Windowsçš„WSL2ä¸‹è½½å¹¶é…ç½®Redisï¼Œå¹¶ä¸”é€šè¿‡é…ç½®ç«¯å£è½¬å‘ï¼Œå®ç°æœ¬åœ°pycharmè®¿é—®redisæœåŠ¡ã€‚ä¸€æ–‡è¯¦è§£ã€‚ - AlphaGeek - åšå®¢å›­</a></p>
<h2 id="å¯åŠ¨æœåŠ¡å™¨"><a href="#å¯åŠ¨æœåŠ¡å™¨" class="headerlink" title="å¯åŠ¨æœåŠ¡å™¨"></a>å¯åŠ¨æœåŠ¡å™¨</h2><p><code>redis-server</code>  </p>
<p><strong>å¯åŠ¨ Redis</strong>ï¼š</p>
<ul>
<li>å¦‚æœ Redis æœªè‡ªåŠ¨å¯åŠ¨ï¼Œæ‰‹åŠ¨å¯åŠ¨ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service redis-server start</span><br></pre></td></tr></table></figure>
<p>éªŒè¯ Redis çŠ¶æ€ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service redis-server status</span><br></pre></td></tr></table></figure>
<p>ç¡®ä¿çŠ¶æ€æ˜¾ç¤º active (running)ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒRedis ç›‘å¬åœ¨ 127.0.0.1:6379</p>
<p><strong>å¯åŠ¨å®¢æˆ·ç«¯</strong> <code>redis-cli</code></p>
<h2 id="RedisInsight"><a href="#RedisInsight" class="headerlink" title="RedisInsight"></a>RedisInsight</h2><p>å¥½åƒç›´æ¥ç”¨windowç‰ˆå°±å¯ä»¥ wslçš„redisç›´æ¥å ç”¨é‚£ä¸ªç«¯å£çš„</p>
<h1 id="åŸºæœ¬æ•°æ®ç»“æ„"><a href="#åŸºæœ¬æ•°æ®ç»“æ„" class="headerlink" title="åŸºæœ¬æ•°æ®ç»“æ„"></a>åŸºæœ¬æ•°æ®ç»“æ„</h1><h2 id="å­—ç¬¦ä¸²string"><a href="#å­—ç¬¦ä¸²string" class="headerlink" title="å­—ç¬¦ä¸²string"></a>å­—ç¬¦ä¸²string</h2><p><code>set key value</code></p>
<p><code>get key</code></p>
<p><code>expire key</code> è®¾ç½®è¿‡æœŸæ—¶é—´</p>
<p><code>setex key seconds value</code></p>
<p><code>TTL key</code> æŸ¥çœ‹è¿‡æœŸæ—¶é—´</p>
<blockquote>
<p> redisçš„keyåŒºåˆ†å¤§å°å†™</p>
<p>redisé»˜è®¤ä½¿ç”¨stringå­˜å‚¨æ•°æ® è€Œä¸”æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ -&gt;ä¸æ”¯æŒä¸­æ–‡</p>
</blockquote>
<p><code>del key</code></p>
<p><code>exists key</code></p>
<p><code>keys *</code> <code>key *me</code>æ‰€æœ‰ä»¥meç»“å°¾çš„é”®</p>
<p><code>flushall</code> åˆ é™¤æ‰€æœ‰çš„é”®</p>
<p><code>clear</code> æ¸…ç©ºå±å¹•</p>
<h2 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h2><p>å¥½åƒæ˜¯ä¸ªåŒå‘æ ˆ</p>
<p><code>LPUSH key element</code></p>
<p><code>RPUSH key element</code></p>
<p><code>LRANGE key start stop</code>  like <code>LRANGE letter 0 -1</code></p>
<p>ç›¸å½“äºè¿™ä¸ªkeyæ˜¯æ•°ç»„åï¼Œä¸€ä¸ªkeyå¯¹ä¸€ä¸ªåˆ—è¡¨</p>
<p><code>LPOP key [count]</code> åˆ é™¤æœ€ånä¸ªå…ƒç´ </p>
<p><code>RPOP key [count]</code></p>
<p><code>LLEN key</code> åˆ—è¡¨é•¿åº¦</p>
<h2 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h2><p><code>SADD key member [member ...]</code> å‘é›†åˆkeyä¸­æ·»åŠ å…ƒç´ </p>
<p><code>SMEMBERS key</code>æŸ¥çœ‹é›†åˆå…ƒç´ </p>
<p><code>SCARD key</code> è·å–é›†åˆçš„æˆå‘˜æ•°</p>
<p><code>SISMEMBER key member</code> æŸ¥è¯¢å…ƒç´ æ˜¯å¦é›†åˆä¸­</p>
<p><code>SREM key member</code> åˆ é™¤é›†åˆä¸­çš„å…ƒç´ </p>
<p>Redisä¸­æ”¯æŒé›†åˆçš„åŸºæœ¬è¿ç®—ï¼ˆäº¤é›†ã€å¹¶é›†Â·Â·Â·ï¼‰<code>SINTER</code> <code>SUNION</code></p>
<h2 id="æœ‰åºé›†åˆ"><a href="#æœ‰åºé›†åˆ" class="headerlink" title="æœ‰åºé›†åˆ"></a>æœ‰åºé›†åˆ</h2><p>æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªæµ®ç‚¹ç±»å‹çš„åˆ†æ•°ï¼Œæ¥å¯¹é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œä»å°åˆ°å¤§çš„æ’åº</p>
<p>æœ‰åºé›†åˆçš„æˆå‘˜æ˜¯å”¯ä¸€çš„ï¼Œä½†æ˜¯åˆ†æ•°æ˜¯å¯ä»¥é‡å¤çš„</p>
<p><code>ZADD key score member</code></p>
<p><code>ZRANGE key start stop [WITHSCORES]</code></p>
<p><code>ZSCORE key member</code> æŸ¥è¯¢åˆ†æ•°</p>
<p><code>ZRANK key member</code> æŸ¥è¯¢æ’å</p>
<p><code>ZRREVRANK key</code> æŸ¥è¯¢æ’åï¼ˆä»å¤§åˆ°å°ï¼‰</p>
<p><code>ZREM key member</code> åˆ é™¤æœ‰åºé›†åˆä¸­çš„å…ƒç´ </p>
<h2 id="å“ˆå¸Œ"><a href="#å“ˆå¸Œ" class="headerlink" title="å“ˆå¸Œ"></a>å“ˆå¸Œ</h2><p>ä¸€ä¸ªé”®å€¼å¯¹çš„é›†åˆ</p>
<p><code>HSET key field value</code>    é”®å€¼å¯¹ï¼šfield-value</p>
<p><code>HGET key field</code></p>
<p><code>HGETALL key</code> è·å–æ‰€æœ‰é”®å€¼å¯¹</p>
<p><code>HDEL key field</code> åˆ é™¤é”®å€¼å¯¹</p>
<p><code>HKEYS key</code></p>
<p><code>HLENS key</code> æ‰€æœ‰é”®å€¼å¯¹çš„æ•°é‡</p>
<p><code>HVALS key</code> æ‰€æœ‰å€¼</p>
<blockquote>
<p>keyæ˜¯å¯¹äºæ¯ä¸€ä¸ªå“ˆå¸Œè¡¨çš„ï¼Œè€Œfield-valueæ‰æ˜¯å“ˆå¸Œè¡¨é‡ŒçœŸæ­£çš„kv</p>
</blockquote>
<h1 id="é€šç”¨å‘½ä»¤"><a href="#é€šç”¨å‘½ä»¤" class="headerlink" title="é€šç”¨å‘½ä»¤"></a>é€šç”¨å‘½ä»¤</h1><p><code>KEYS pattern</code>     æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼çš„key </p>
<p><code>EXISTS key</code>        æ£€æŸ¥ç»™å®škeyæ˜¯å¦å­˜åœ¨</p>
<p><code>TYPE key</code>            è¿”å›keyæ‰€å­˜å‚¨çš„å€¼çš„ç±»å‹</p>
<p><code>DEL key</code>            åœ¨keyå­˜åœ¨æ—¶åˆ é™¤key</p>
<h2 id="å‘å¸ƒè®¢é˜…æ¨¡å¼"><a href="#å‘å¸ƒè®¢é˜…æ¨¡å¼" class="headerlink" title="å‘å¸ƒè®¢é˜…æ¨¡å¼"></a>å‘å¸ƒè®¢é˜…æ¨¡å¼</h2><p><code>SUBSCRIBE channel [channel ...]</code> </p>
<p><code>PUBLISH channel message</code> </p>
<p>é—®é¢˜ï¼šæ¶ˆæ¯æ— æ³•æŒä¹…åŒ– æ— æ³•è®°å½•å†å²æ¶ˆæ¯ç­‰ç­‰</p>
<p><strong>è§£å†³ï¼šâ†“â†“â†“</strong></p>
<h2 id="æ¶ˆæ¯é˜Ÿåˆ—Stream"><a href="#æ¶ˆæ¯é˜Ÿåˆ—Stream" class="headerlink" title="æ¶ˆæ¯é˜Ÿåˆ—Stream"></a>æ¶ˆæ¯é˜Ÿåˆ—Stream</h2><p><code>XADD key *|id field value</code> like <code>XADD async * course redis</code>  <code>XADD async * course git</code> </p>
<blockquote>
<p><code>*</code> =è‡ªåŠ¨ç”Ÿæˆid</p>
</blockquote>
<p><code>XLEN key</code> æŸ¥çœ‹æ¶ˆæ¯æ•°é‡</p>
<p><code>XRANGE key start end</code> æŸ¥çœ‹Streamä¸­æ¶ˆæ¯çš„è¯¦ç»†å†…å®¹<code>XRANGE async - +</code></p>
<p><code>XDEL key id [id ...]</code> åˆ é™¤</p>
<p><code>XTRIM key MAXLEN | MINID [= | ~] threshold</code> </p>
<blockquote>
<p>e.g. <code>XTRIM async MAXLEN 0</code> å³åˆ é™¤æ‰€æœ‰æ¶ˆæ¯</p>
</blockquote>
<p><code>XREAD [COUNT count]  [BLOCK milliseconds] STREAMS key id</code></p>
<blockquote>
<p> count:ä¸€æ¬¡è¯»å–næ¡æ¶ˆæ¯ï¼Œblock:å¦‚æœæ²¡æœ‰æ¶ˆæ¯çš„è¯å°±é˜»å¡næ¯«ç§’ï¼Œid:ä»è¿™æ¡å¼€å§‹å‘åè¯»</p>
<p><code>XREAD COUNT 2 BLOCK 1000 STREAMS async 0</code> </p>
<p>0:ä»å¤´å¼€å§‹è¯»å–</p>
</blockquote>
<p><code>XGROUP CREATE key group id | $</code>åˆ›å»ºä¸€ä¸ªå«groupçš„æ¶ˆè´¹ç»„</p>
<p><code>XINFO GROUPS key</code> æŸ¥çœ‹æ¶ˆè´¹ç»„ä¿¡æ¯</p>
<p><code>XGROUP CREATECONSUMER key group consumer</code>æ·»åŠ æ¶ˆè´¹è€…</p>
<p><em>ä¸ºå•¥ä¸ç”¨kafka rabbitMQ </em>è¿™é‡Œé»˜è®¤æ˜¯ä½ è¦æŒæ¡æ¶ˆæ¯é˜Ÿåˆ— æ¶ˆæ¯ä¸­é—´ä»¶ ä¸­ æ¶ˆè´¹-ç”Ÿäº§æ¨¡å¼çš„æ¦‚å¿µ</p>
<p><code>XINFO GROUPS key</code> æŸ¥çœ‹ä¸€ä¸ªæ¶ˆè´¹è€…</p>
<p><code>XREADGROUP GROUP group consumer [COUNT count] [BLOCK milliseconds] STREAMS key id</code></p>
<p>id:<code>&gt;</code>è¯»å–æœ€æ–°çš„æ¶ˆæ¯</p>
<h2 id="åœ°ç†ç©ºé—´Geospatial"><a href="#åœ°ç†ç©ºé—´Geospatial" class="headerlink" title="åœ°ç†ç©ºé—´Geospatial"></a>åœ°ç†ç©ºé—´Geospatial</h2><p><code>GEOADD key longtitude latitude member</code>  <code>GEOPOS key member</code></p>
<p><code>GEODIST key member member [KM]</code></p>
<p><code>GEOSEARCH key FROMMEMBER member BYRADIUS radius [KM]</code></p>
<h2 id="HyperLogLog"><a href="#HyperLogLog" class="headerlink" title="HyperLogLog"></a>HyperLogLog</h2><p>é›†åˆä¸­ä¸è®¡ç®—é‡å¤å…ƒç´ çš„ä¸ªæ•°</p>
<p><code>PFADD key [element...]</code> <code>PFCOUNT key</code> <code>PFMERGE destkey sourcekey sourcekey</code></p>
<h2 id="Bitmap"><a href="#Bitmap" class="headerlink" title="Bitmap"></a>Bitmap</h2><p><code>SETBIT key offset value</code> <code>GETBIT key offset</code></p>
<p>å¯ä»¥ç›´æ¥ä½¿ç”¨setè®¾ç½®</p>
<p>`SET key â€œ\xF0â€</p>
<blockquote>
<p>æ­¤å¤„\xF0 = 16 = 1111</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>offset</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
</blockquote>
<p><code>BITCOUNT key</code>æœ‰å¤šå°‘ä¸ª1</p>
<p><code>BITPOS key bit</code> ä¸€ä¸ªå‡ºç°bitï¼ˆ0/1ï¼‰çš„ä½ç½®</p>
<h2 id="ä½åŸŸBitfield"><a href="#ä½åŸŸBitfield" class="headerlink" title="ä½åŸŸBitfield"></a>ä½åŸŸBitfield</h2><p><code>BITFIELD key &lt;SET encoding offset value|INCRBY encoding offset increment&gt;</code></p>
<p><code>BITFILD key [GET encoding offset|[OVERFLOW WRAP|SAT|FAIL]</code></p>
<blockquote>
<p><code>BITFIELD player:1 set u8 #0 1</code></p>
</blockquote>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><p><code>INCR key</code></p>
<h1 id="Redis-Java-å®¢æˆ·ç«¯"><a href="#Redis-Java-å®¢æˆ·ç«¯" class="headerlink" title="Redis Java å®¢æˆ·ç«¯"></a>Redis Java å®¢æˆ·ç«¯</h1><p>Spring Data Redis</p>
<h2 id="è¿æ¥æ–¹æ³•"><a href="#è¿æ¥æ–¹æ³•" class="headerlink" title="è¿æ¥æ–¹æ³•"></a>è¿æ¥æ–¹æ³•</h2><p>æ€»ä¹‹æ˜¯è¦é…ç½®ä»€ä¹ˆä¾èµ–æ¥ç€</p>
<p>ç„¶å</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfiguration</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;å¼€å§‹åˆ›å»ºredisæ¨¡ç‰ˆå¯¹è±¡&quot;</span>);</span><br><span class="line">        <span class="type">RedisTemplate</span> <span class="variable">redisTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>();</span><br><span class="line">        <span class="comment">//redisçš„è¿æ¥å·¥å‚å¯¹è±¡</span></span><br><span class="line">        redisTemplate.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        <span class="comment">//è®¾ç½®redisçš„keyåºåˆ—åŒ–</span></span><br><span class="line">        redisTemplate.setKeySerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>());</span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testString</span><span class="params">()</span>&#123;</span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;value&quot;</span>);</span><br><span class="line">        System.out.println(redisTemplate.opsForValue().get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">        redisTemplate.opsForValue().setIfAbsent(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;value&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testHash</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">HashOperations</span> <span class="variable">hashOperations</span> <span class="operator">=</span> redisTemplate.opsForHash();</span><br><span class="line"></span><br><span class="line">        hashOperations.put(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;value&quot;</span>,<span class="number">1</span>);</span><br><span class="line">        System.out.println(hashOperations.get(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;value&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="type">Set</span> <span class="variable">keys</span> <span class="operator">=</span> hashOperations.keys(<span class="string">&quot;key&quot;</span>);</span><br><span class="line">        System.out.println(keys);</span><br><span class="line"></span><br><span class="line">        <span class="type">List</span> <span class="variable">values</span> <span class="operator">=</span> hashOperations.values(<span class="string">&quot;key&quot;</span>);</span><br><span class="line">        System.out.println(values);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>Â·Â·Â·å¥½å¤šï¼è‡ªå·±æŸ¥å§ï¼åŸºæœ¬å°±æ˜¯redisä¸­çš„æ“ä½œå‘½ä»¤æ¢æˆå‡½æ•°</p>
<h1 id="Redisäº‹åŠ¡"><a href="#Redisäº‹åŠ¡" class="headerlink" title="Redisäº‹åŠ¡"></a>Redisäº‹åŠ¡</h1><p>å†ä¸€æ¬¡è¯·æ±‚ä¸­æ‰§è¡Œå¤šä¸ªå‘½ä»¤ï¼ŒRedisä¸­çš„äº‹åŠ¡ä¸»è¦æ˜¯é€šè¿‡MULTI(å¼€å¯)å’ŒEXEC(æ‰§è¡Œ)è¿™ä¸¤ä¸ªå‘½ä»¤æ¥å®ç°</p>
<p> ä¸å…³ç³»æ€§æ•°æ®åº“ä¸åŒï¼ŒRedisä¸èƒ½ä¿è¯æ‰€æœ‰å‘½ä»¤éƒ½èƒ½æ‰§è¡ŒæˆåŠŸï¼Œå®ƒçš„æ‰§è¡Œæˆæœå–å†³äºäº‹åŠ¡ä¸­çš„å‘½ä»¤ã€‚</p>
<p>ä½†æ˜¯Redisèƒ½ä¸ºæˆ‘ä»¬ä¿è¯ä»¥ä¸‹ä¸‰ç‚¹ï¼š</p>
<ol>
<li>å‘é€EXECå‘½ä»¤ä¹‹å‰ï¼Œæ‰€æœ‰å‘½ä»¤éƒ½ä¼šè¢«æ”¾å…¥åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç¼“å­˜èµ·æ¥ï¼Œä¸ä¼šç«‹å³æ‰§è¡Œ</li>
<li>åœ¨æ”¶åˆ°EXECå‘½ä»¤ä¹‹åï¼Œäº‹åŠ¡å¼€å§‹æ‰§è¡Œï¼Œäº‹åŠ¡ä¸­çš„ä»»ä½•ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå…¶ä»–å‘½ä»¤ä»ç„¶ä¼šè¢«æ‰§è¡Œ</li>
<li>åœ¨äº‹åŠ¡çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…¶ä»–å®¢æˆ·ç«¯æäº¤çš„å‘½ä»¤è¯·æ±‚ï¼Œå¹¶ä¸ä¼šå‘—æ’å…¥åˆ°äº‹åŠ¡çš„æ‰§è¡Œå‘½ä»¤åºåˆ—ä¸­</li>
</ol>
<p>E.G.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MULTI</span><br><span class="line"></span><br><span class="line">SET</span><br><span class="line">LPUSH</span><br><span class="line">SADD</span><br><span class="line"></span><br><span class="line">EXEC/DISCARD</span><br></pre></td></tr></table></figure>
<h1 id="RedisæŒä¹…åŒ–"><a href="#RedisæŒä¹…åŒ–" class="headerlink" title="RedisæŒä¹…åŒ–"></a>RedisæŒä¹…åŒ–</h1><p>å› ä¸ºRedisæ˜¯åŸºäºå†…å­˜(RAM)çš„æ•°æ®åº“,å¦‚æœæ²¡æœ‰æŒä¹…åŒ–çš„è¯,ä¸€æ—¦æœåŠ¡å™¨é‡å¯æˆ–è€…æ–­ç”µæ‰€æœ‰æ•°æ®éƒ½ä¼šä¸¢å¤±,æ‰€ä»¥éœ€è¦æŒä¹…åŒ–</p>
<h2 id="RDB-Redis-Database"><a href="#RDB-Redis-Database" class="headerlink" title="RDB(Redis Database)"></a>RDB(Redis Database)</h2><p>åœ¨æŒ‡å®šæ—¶é—´é—´éš”å†…å°†å†…å­˜ä¸­çš„æ•°æ®å¿«ç…§å†™å…¥ç£ç›˜ï¼Œä»–æ˜¯æŸä¸€ä¸ªæ—¶é—´ç‚¹ä¸Šæ•°æ®çš„å®Œæ•´å‰¯æœ¬ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ï¼ˆredis.confï¼‰ä¸­çš„SAVEå‚æ•°æ¥é…ç½®</p>
<p><code>save &lt;seconds&gt; &lt;changes&gt; [&lt;seconds&gt; &lt;changes&gt; ...]</code></p>
<p>save ç§’æ•° ä¿®æ”¹æ¬¡æ•°</p>
<p><code>save</code> æ‰‹åŠ¨è§¦å‘å¿«ç…§</p>
<p><code>xxd dump.rdb</code></p>
<p>ç”±äºç”Ÿäº§ç¯å¢ƒä¸­ä¸ºrediså¼€è¾Ÿçš„å†…å­˜åŒºåŸŸä¸€èˆ¬éƒ½æ¯”è¾ƒå¤§ï¼Œå†…å­˜ä¸­æ•°æ®åŒæ­¥åˆ°ç¡¬ç›˜çš„è¿™ä¸ªè¿‡ç¨‹ä¼šæŒç»­æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œè¿™æ®µæ—¶é—´Rediséƒ½å¤„äºä¸€ä¸ªé˜»å¡çš„çŠ¶æ€ï¼Œä¸èƒ½æ¥å—ä»»ä½•è¯·æ±‚</p>
<p><code>bgsave</code> åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œæ¥è´Ÿè´£å°†å†…å­˜ä¸­çš„æ•°æ®å†™å…¥ç¡¬ç›˜ä¸­ï¼Œä½†æ˜¯è¿‡ç¨‹ä¸­æœ‰ä¸€å®šçš„æ€§èƒ½æŸè€—</p>
<h2 id="AOF-Append-Only-File"><a href="#AOF-Append-Only-File" class="headerlink" title="AOF(Append Only File)"></a>AOF(Append Only File)</h2><p>è¿½åŠ æ–‡ä»¶ã€‚</p>
<p>åœ¨æ‰§è¡Œå†™å‘½ä»¤æ—¶ï¼Œä¸ä»…ä¼šå°†å‘½ä»¤å†™å…¥å†…å­˜ä¸­ï¼Œè¿˜ä¼šå°†å‘½ä»¤å†™å…¥åˆ°ä¸€ä¸ªè¿½åŠ çš„æ–‡ä»¶ä¸­ï¼Œå³AOFæ–‡ä»¶ï¼Œå®ƒä»¥æ—¥å¿—çš„å½¢å¼æ¥è®°å½•æ¯ä¸€ä¸ªå†™æ“ä½œã€‚å½“Redisé‡å¯çš„æ—¶å€™å°±ä¼šé€šè¿‡é‡æ–°æ‰§è¡ŒAOFæ–‡ä»¶ä¸­çš„å‘½ä»¤ï¼Œæ¥åœ¨å†…å­˜ä¸­é‡å»ºæ•´ä¸ªæ•°æ®åº“çš„å†…å®¹ã€‚</p>
<p>å¼€å¯AOFï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­å°†append only çš„å€¼æ”¹æˆyeså³å¯</p>
<h1 id="ä¸»ä»å¤åˆ¶"><a href="#ä¸»ä»å¤åˆ¶" class="headerlink" title="ä¸»ä»å¤åˆ¶"></a>ä¸»ä»å¤åˆ¶</h1><p>å°†ä¸€å°Redisçš„æ•°æ®å¤åˆ¶åˆ°å…¶ä»–RedisæœåŠ¡å™¨ã€‚</p>
<blockquote>
<p> <strong>ä¸»èŠ‚ç‚¹(master)â€”â€”â€”â€”-&gt;ä»èŠ‚ç‚¹(slave)ï¼ˆå¯å¤æ•°ï¼‰</strong></p>
</blockquote>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸»èŠ‚ç‚¹è´Ÿè´£å†™æ“ä½œï¼Œä»èŠ‚ç‚¹è´Ÿè´£è¯»æ“ä½œã€‚</p>
<p>ä¸»èŠ‚ç‚¹ä¼šå°†è‡ªå·±çš„æ•°æ®å˜åŒ–é€šè¿‡å¼‚æ­¥çš„æ–¹å¼å‘é€ç»™ä»èŠ‚ç‚¹ï¼Œä»èŠ‚ç‚¹æ¥æ”¶åˆ°åæ›´æ–°è‡ªå·±çš„æ•°æ®æ¥è¾¾åˆ°æ•°æ®ä¸€è‡´ã€‚</p>
<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>åªéœ€è¦ä¿®æ”¹ä»èŠ‚ç‚¹é…ç½®ã€‚</p>
<h3 id="æ–¹å¼1ï¼šé€šè¿‡å‘½ä»¤è¡Œæ‰§è¡Œå‘½ä»¤-ä¸å¸¸ç”¨"><a href="#æ–¹å¼1ï¼šé€šè¿‡å‘½ä»¤è¡Œæ‰§è¡Œå‘½ä»¤-ä¸å¸¸ç”¨" class="headerlink" title="æ–¹å¼1ï¼šé€šè¿‡å‘½ä»¤è¡Œæ‰§è¡Œå‘½ä»¤(ä¸å¸¸ç”¨)"></a>æ–¹å¼1ï¼šé€šè¿‡å‘½ä»¤è¡Œæ‰§è¡Œå‘½ä»¤(ä¸å¸¸ç”¨)</h3><blockquote>
<p><strong>å‘½ä»¤é…ç½®æ–¹å¼ï¼š</strong><br>æŸ¥çœ‹å½“å‰èŠ‚ç‚¹è§’è‰²ï¼šrole</p>
<p>é…ç½®æ‰€å±ä¸»èŠ‚ç‚¹ï¼š replicaof host port æˆ–è€… slaveof host port</p>
</blockquote>
<h3 id="æ–¹å¼2ï¼šé€šè¿‡é…ç½®æ–‡ä»¶"><a href="#æ–¹å¼2ï¼šé€šè¿‡é…ç½®æ–‡ä»¶" class="headerlink" title="æ–¹å¼2ï¼šé€šè¿‡é…ç½®æ–‡ä»¶"></a>æ–¹å¼2ï¼šé€šè¿‡é…ç½®æ–‡ä»¶</h3><p>è¿›å…¥Redisçš„å®‰è£…ç›®å½•ä¸‹ï¼ŒæŠŠé…ç½®æ–‡ä»¶å¤åˆ¶åˆ°æ ¹ç›®å½•ä¸‹ <code>cp redis.conf ~</code>ï¼Œä½œä¸ºä¸»èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶ï¼ˆä¸éœ€è¦æ”¹åŠ¨ï¼‰</p>
<p>å›åˆ°æ ¹ç›®å½• <code>cp redis.conf redis-6380.conf</code>å¤åˆ¶ä¸º6380ï¼ˆâ†è¿™æ˜¯ç«¯å£å·ï¼‰ä½œä¸ºä»èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶</p>
<blockquote>
<p> ä¿®æ”¹æ­¤æ–‡ä»¶ï¼šæŠŠç«¯å£å·æ”¹ä¸º6380ï¼ŒæŠŠpidfileæ”¹ä¸º6380 </p>
<p>ï¼ˆRedisæ˜¯ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œï¼Œç³»ç»Ÿé»˜è®¤ä¼šæŠŠpidå†™å…¥è¿™ä¸ªæ–‡ä»¶ï¼‰</p>
<p>æ‰¾åˆ°dbfilenameï¼ŒæŠŠåé¢çš„æ–‡ä»¶åä¹ŸåŠ ä¸Šç«¯å£å·ï¼ˆæ­¤å³ä¸ºæŒä¹…åŒ–æ–‡ä»¶ï¼Œå½“æ‰§è¡Œsave/bgsaveæ—¶å‚¨å­˜ï¼‰</p>
<p>æ‰¾åˆ°replicaofï¼Œå†™å…¥ä¸»èŠ‚ç‚¹ip&amp;ç«¯å£å·ï¼ˆæŒ‡å®šä¸»èŠ‚ç‚¹ï¼‰</p>
</blockquote>
<p>å†æ¬¡å¤åˆ¶<code>:1,$s/6380/6381/g</code> &lt;-è¿™æ˜¯ä»€ä¹ˆo.0</p>
<p><code>info replicatioon</code>æŸ¥çœ‹ä¸»èŠ‚ç‚¹ä¿¡æ¯</p>
<h1 id="å“¨å…µæ¨¡å¼Sentinel"><a href="#å“¨å…µæ¨¡å¼Sentinel" class="headerlink" title="å“¨å…µæ¨¡å¼Sentinel"></a>å“¨å…µæ¨¡å¼Sentinel</h1><p>å“¨å…µä¼šä»¥ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹è¿è¡Œåœ¨redisé›†ç¾¤ä¸­ï¼Œç”¨æ¥ç›‘æ§redisé›†ç¾¤ä¸­çš„å„ä¸ªèŠ‚ç‚¹æ˜¯å¦è¿è¡Œæ­£å¸¸</p>
<p>ä¸»è¦ä½œç”¨:ç›‘æ§ã€é€šçŸ¥ã€è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼ˆæŠŠä¸€ä¸ªä»èŠ‚ç‚¹è®¾ç½®ä¸ºä¸»èŠ‚ç‚¹</p>
<p>é…ç½®æ–‡ä»¶sentinel.confï¼Œæ·»åŠ é…ç½®<code>sentinel monitor master 127.0.0.1 6379 1</code></p>
<p>å¯åŠ¨å“¨å…µèŠ‚ç‚¹ï¼š<code>redis-sentinel sentinel.conf</code></p>
<h1 id="è¿‡æœŸç­–ç•¥å’Œæ·˜æ±°ç­–ç•¥"><a href="#è¿‡æœŸç­–ç•¥å’Œæ·˜æ±°ç­–ç•¥" class="headerlink" title="è¿‡æœŸç­–ç•¥å’Œæ·˜æ±°ç­–ç•¥"></a>è¿‡æœŸç­–ç•¥å’Œæ·˜æ±°ç­–ç•¥</h1><p>å½“keyè¿‡æœŸäº†/å†…å­˜è¾¾åˆ°æœ€å¤§å¯ä½¿ç”¨ç©ºé—´æ—¶ï¼Œéœ€è¦å»åˆ é™¤æ•°æ®ã€‚</p>
<h2 id="è¢«åŠ¨åˆ é™¤ç­–ç•¥"><a href="#è¢«åŠ¨åˆ é™¤ç­–ç•¥" class="headerlink" title="è¢«åŠ¨åˆ é™¤ç­–ç•¥"></a>è¢«åŠ¨åˆ é™¤ç­–ç•¥</h2><p>è§¦å‘æ¡ä»¶ï¼šè¯»/å†™ä¸€ä¸ªè¿‡æœŸçš„keyæ—¶ï¼Œå‘ç°è¿‡æœŸå°±åˆ é™¤ã€‚</p>
<p>ç¼ºç‚¹ï¼šå†·æ•°æ®æ— æ³•åˆ é™¤ï¼ˆä¸€ç›´æ²¡è¯»å†™ï¼‰</p>
<h2 id="ä¸»åŠ¨åˆ é™¤ç­–ç•¥"><a href="#ä¸»åŠ¨åˆ é™¤ç­–ç•¥" class="headerlink" title="ä¸»åŠ¨åˆ é™¤ç­–ç•¥"></a>ä¸»åŠ¨åˆ é™¤ç­–ç•¥</h2><p> è§¦å‘æ¡ä»¶ï¼š</p>
<ol>
<li><p>å·²ç”¨å†…å­˜è¶…è¿‡maxmemoryæ—¶è§¦å‘</p>
<p>â€‹    <strong>æ¸…ç†ç­–ç•¥</strong>ï¼š</p>
<pre><code>1. volatile(å·²è®¾ç½®è¿‡æœŸæ—¶é—´keyçš„é›†åˆ)-lru(æœ€è¿‘æœ€å°‘ä½¿ç”¨æ•°æ®)
1. volatile-ttl(å°†è¦è¿‡æœŸ)
1. volatile-random(éšæœº)
1. allkeys(æ‰€æœ‰keyé›†åˆ)-lru
1. allkeys-random
</code></pre></li>
<li><p>è®¾ç½®keyçš„è¿‡æœŸæ—¶é—´(EXPIRE key second)</p>
</li>
</ol>
<h2 id="é»˜è®¤ç­–ç•¥Enviction"><a href="#é»˜è®¤ç­–ç•¥Enviction" class="headerlink" title="é»˜è®¤ç­–ç•¥Enviction"></a>é»˜è®¤ç­–ç•¥Enviction</h2><p>å†…å­˜è¾¾åˆ°é™åˆ¶æ—¶ï¼Œä¸æ·˜æ±°æ•°æ®ï¼Œä¹Ÿä¸å†™å…¥ï¼Œå‘½ä»¤æŠ¥é”™ã€‚</p>
<h1 id="å¸¸è§åœºæ™¯é—®é¢˜"><a href="#å¸¸è§åœºæ™¯é—®é¢˜" class="headerlink" title="å¸¸è§åœºæ™¯é—®é¢˜"></a>å¸¸è§åœºæ™¯é—®é¢˜</h1><p>ç¼“å­˜ç³»ç»Ÿï¼š<br><img src="../images/Redis/image.png" alt="alt text"></p>
<h2 id="ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©"><a href="#ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©" class="headerlink" title="ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©"></a>ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©</h2><h3 id="ç¼“å­˜ç©¿é€"><a href="#ç¼“å­˜ç©¿é€" class="headerlink" title="ç¼“å­˜ç©¿é€"></a>ç¼“å­˜ç©¿é€</h3><p><strong>åœºæ™¯</strong></p>
<p>ç¼“å­˜å’Œæ•°æ®åº“ä¸­éƒ½æ²¡æœ‰çš„æ•°æ®ï¼Œè€Œç”¨æˆ·ä¸æ–­å‘èµ·è¯·æ±‚ï¼ˆæ¶æ„æ”»å‡»ï¼‰ã€‚ç”±äºç¼“å­˜æ˜¯ä¸å‘½ä¸­æ—¶è¢«åŠ¨å†™çš„ï¼Œå¹¶ä¸”å‡ºäºå®¹é”™è€ƒè™‘ï¼Œå¦‚æœä»å­˜å‚¨å±‚æŸ¥ä¸åˆ°æ•°æ®åˆ™ä¸å†™å…¥ç¼“å­˜ï¼Œè¿™å°†å¯¼è‡´è¿™ä¸ªä¸å­˜åœ¨çš„æ•°æ®æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ°å­˜å‚¨å±‚å»æŸ¥è¯¢ï¼Œå¤±å»äº†ç¼“å­˜çš„æ„ä¹‰ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>æ¥å£å±‚å¢åŠ æ ¡éªŒï¼Œå¦‚ç”¨æˆ·é‰´æƒæ ¡éªŒï¼ŒidåšåŸºç¡€æ ¡éªŒï¼Œid&lt;=0çš„ç›´æ¥æ‹¦æˆªï¼›</li>
<li>ä»ç¼“å­˜å–ä¸åˆ°çš„æ•°æ®ï¼Œåœ¨æ•°æ®åº“ä¸­ä¹Ÿæ²¡æœ‰å–åˆ°ï¼Œè¿™æ—¶ä¹Ÿå¯ä»¥å°†key-valueå¯¹å†™ä¸ºkey-nullï¼Œç¼“å­˜æœ‰æ•ˆæ—¶é—´å¯ä»¥è®¾ç½®çŸ­ç‚¹ï¼Œå¦‚30ç§’ï¼ˆè®¾ç½®å¤ªé•¿ä¼šå¯¼è‡´æ­£å¸¸æƒ…å†µä¹Ÿæ²¡æ³•ä½¿ç”¨ï¼‰ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢æ”»å‡»ç”¨æˆ·åå¤ç”¨åŒä¸€ä¸ªidæš´åŠ›æ”»å‡»</li>
</ul>
<h3 id="ç¼“å­˜å‡»ç©¿"><a href="#ç¼“å­˜å‡»ç©¿" class="headerlink" title="ç¼“å­˜å‡»ç©¿"></a>ç¼“å­˜å‡»ç©¿</h3><p>redisçš„ä¸€ä¸ªkeyå¯ä»¥æ¥å—3000ä¸ªlè¯·æ±‚ï¼Œè€Œmysqlå¯ä»¥æ¥å—2000ä¸ªã€‚å½“redisçš„æœ‰ä¸€ä¸ªkeyçš„TTL=0æ—¶ï¼Œ3000ä¸ªè¯·æ±‚ç¬é—´æ¥åˆ°mysqlï¼Œæ­¤äº‹å¯èƒ½å‡ºç°ç¬é—´å®•æœºï¼Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿéƒ½æ²¡åŠæ³•è¿›è¡Œä½¿ç”¨</p>
<p><strong>åœºæ™¯</strong></p>
<p>ç¼“å­˜å‡»ç©¿æ˜¯æŒ‡ç¼“å­˜ä¸­æ²¡æœ‰ä½†æ•°æ®åº“ä¸­æœ‰çš„æ•°æ®ï¼ˆä¸€èˆ¬æ˜¯ç¼“å­˜æ—¶é—´åˆ°æœŸï¼‰ï¼Œè¿™æ—¶ç”±äºå¹¶å‘ç”¨æˆ·ç‰¹åˆ«å¤šï¼ŒåŒæ—¶è¯»ç¼“å­˜æ²¡è¯»åˆ°æ•°æ®ï¼ŒåˆåŒæ—¶å»æ•°æ®åº“å»å–æ•°æ®ï¼Œå¼•èµ·æ•°æ®åº“å‹åŠ›ç¬é—´å¢å¤§ï¼Œé€ æˆè¿‡å¤§å‹åŠ›ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸è¿œä¸è¿‡æœŸã€‚</li>
<li>æ¥å£é™æµä¸ç†”æ–­ï¼Œé™çº§ã€‚é‡è¦çš„æ¥å£ä¸€å®šè¦åšå¥½é™æµç­–ç•¥ï¼Œé˜²æ­¢ç”¨æˆ·æ¶æ„åˆ·æ¥å£ï¼ŒåŒæ—¶è¦é™çº§å‡†å¤‡ï¼Œå½“æ¥å£ä¸­çš„æŸäº›æœåŠ¡ä¸å¯ç”¨æ—¶å€™ï¼Œè¿›è¡Œç†”æ–­ï¼Œå¤±è´¥å¿«é€Ÿè¿”å›æœºåˆ¶ã€‚</li>
<li>å¸ƒéš†è¿‡æ»¤å™¨ã€‚bloomfilterå°±ç±»ä¼¼äºä¸€ä¸ªhash setï¼Œç”¨äºå¿«é€Ÿåˆ¤æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºé›†åˆä¸­ï¼Œå…¶å…¸å‹çš„åº”ç”¨åœºæ™¯å°±æ˜¯å¿«é€Ÿåˆ¤æ–­ä¸€ä¸ªkeyæ˜¯å¦å­˜åœ¨äºæŸå®¹å™¨ï¼Œä¸å­˜åœ¨å°±ç›´æ¥è¿”å›ã€‚å¸ƒéš†è¿‡æ»¤å™¨çš„å…³é”®å°±åœ¨äºhashç®—æ³•å’Œå®¹å™¨å¤§å°ï¼Œ</li>
<li>åŠ äº’æ–¥é”ã€‚<br>å‚è€ƒä»£ç ï¼š<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getData</span><span class="params">(String key)</span> <span class="keyword">throws</span> InterruptedException&#123;</span><br><span class="line">    <span class="comment">//ä»ç¼“å­˜ä¸­è¯»å–æ•°æ®</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> getDataFromRedis(key);</span><br><span class="line">    <span class="keyword">if</span>(result == <span class="literal">null</span>)&#123;</span><br><span class="line">		<span class="comment">//å»è·å–é”ï¼Œè·å–æˆåŠŸå»æ•°æ®åº“è·å–æ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span>(reenLock,tryLock())&#123;</span><br><span class="line">            result = getDataFromMysql(key);</span><br><span class="line">            <span class="keyword">if</span>(result!=<span class="literal">null</span>)&#123;</span><br><span class="line">                setDataToCache(key,result);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//é‡Šæ”¾é”</span></span><br><span class="line">            reenLock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è·å–å¤±è´¥</span></span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//æš‚åœ100mså†é‡æ–°å»è·å–æ•°æ®</span></span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            result = getData(key);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰æ•°æ®ï¼Œç¬¬1ä¸ªè¿›å…¥çš„çº¿ç¨‹ï¼Œè·å–é”å¹¶ä»æ•°æ®åº“å»å–æ•°æ®ï¼Œæ²¡é‡Šæ”¾é”ä¹‹å‰ï¼Œå…¶ä»–å¹¶è¡Œè¿›å…¥çš„çº¿ç¨‹ä¼šç­‰å¾…100msï¼Œå†é‡æ–°å»ç¼“å­˜å–æ•°æ®ã€‚è¿™æ ·å°±é˜²æ­¢éƒ½å»æ•°æ®åº“é‡å¤å–æ•°æ®ï¼Œé‡å¤å¾€ç¼“å­˜ä¸­æ›´æ–°æ•°æ®æƒ…å†µå‡ºç°ã€‚</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="ç¼“å­˜é›ªå´©"><a href="#ç¼“å­˜é›ªå´©" class="headerlink" title="ç¼“å­˜é›ªå´©"></a>ç¼“å­˜é›ªå´©</h2><p><strong>åœºæ™¯</strong></p>
<p>ç¼“å­˜é›ªå´©æ˜¯æŒ‡ç¼“å­˜ä¸­æ•°æ®å¤§æ‰¹é‡åˆ°è¿‡æœŸæ—¶é—´ï¼Œè€ŒæŸ¥è¯¢æ•°æ®é‡å·¨å¤§ï¼Œå¼•èµ·æ•°æ®åº“å‹åŠ›è¿‡å¤§ç”šè‡³downæœºã€‚å’Œç¼“å­˜å‡»ç©¿ä¸åŒçš„æ˜¯ï¼Œç¼“å­˜å‡»ç©¿æŒ‡å¹¶å‘æŸ¥åŒä¸€æ¡æ•°æ®ï¼Œç¼“å­˜é›ªå´©æ˜¯ä¸åŒæ•°æ®éƒ½è¿‡æœŸäº†ï¼Œå¾ˆå¤šæ•°æ®éƒ½æŸ¥ä¸åˆ°ä»è€ŒæŸ¥æ•°æ®åº“ã€‚</p>
<p><strong>è§£å†³åŠæ³•</strong></p>
<ul>
<li>ç¼“å­˜æ•°æ®çš„è¿‡æœŸæ—¶é—´è®¾ç½®éšæœºï¼Œé˜²æ­¢åŒä¸€æ—¶é—´å¤§é‡æ•°æ®è¿‡æœŸç°è±¡å‘ç”Ÿã€‚</li>
<li>å¦‚æœç¼“å­˜æ•°æ®åº“æ˜¯åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œå°†çƒ­ç‚¹æ•°æ®å‡åŒ€åˆ†å¸ƒåœ¨ä¸åŒæå¾—ç¼“å­˜æ•°æ®åº“ä¸­ã€‚</li>
<li>è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸è¿œä¸è¿‡æœŸã€‚</li>
</ul>
<h2 id="ç¼“å­˜çš„é¢„çƒ­å’Œé™çº§"><a href="#ç¼“å­˜çš„é¢„çƒ­å’Œé™çº§" class="headerlink" title="ç¼“å­˜çš„é¢„çƒ­å’Œé™çº§"></a>ç¼“å­˜çš„é¢„çƒ­å’Œé™çº§</h2><h3 id="ç¼“å­˜é¢„çƒ­"><a href="#ç¼“å­˜é¢„çƒ­" class="headerlink" title="ç¼“å­˜é¢„çƒ­"></a>ç¼“å­˜é¢„çƒ­</h3><p><strong>åœºæ™¯</strong></p>
<p>ç³»ç»Ÿä¸Šçº¿åï¼Œå°†ç›¸å…³çš„ç¼“å­˜æ•°æ®ç›´æ¥åŠ è½½åˆ°ç¼“å­˜ç³»ç»Ÿã€‚è¿™æ ·å°±å¯ä»¥é¿å…åœ¨ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™ï¼Œå…ˆæŸ¥è¯¢æ•°æ®åº“ï¼Œç„¶åå†å°†æ•°æ®ç¼“å­˜çš„é—®é¢˜,ç”¨æˆ·ç›´æ¥æŸ¥è¯¢äº‹å…ˆè¢«é¢„çƒ­çš„ç¼“å­˜æ•°æ®ã€‚</p>
<p><strong>å®ç°</strong></p>
<ul>
<li>ç›´æ¥å†™ä¸ªç¼“å­˜åˆ·æ–°é¡µé¢ï¼Œä¸Šçº¿æ—¶æ‰‹å·¥æ“ä½œä¸‹ï¼›</li>
<li>æ•°æ®é‡ä¸å¤§ï¼Œå¯ä»¥åœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™è‡ªåŠ¨è¿›è¡ŒåŠ è½½ï¼›</li>
<li>å®šæ—¶åˆ·æ–°ç¼“å­˜ï¼›</li>
</ul>
<h3 id="ç¼“å­˜é™çº§"><a href="#ç¼“å­˜é™çº§" class="headerlink" title="ç¼“å­˜é™çº§"></a>ç¼“å­˜é™çº§</h3><p>å½“è®¿é—®é‡å‰§å¢ã€æœåŠ¡å‡ºç°é—®é¢˜ï¼ˆå¦‚å“åº”æ—¶é—´æ…¢æˆ–ä¸å“åº”ï¼‰æˆ–éæ ¸å¿ƒæœåŠ¡å½±å“åˆ°æ ¸å¿ƒæµç¨‹çš„æ€§èƒ½æ—¶ï¼Œä»ç„¶éœ€è¦ä¿è¯æœåŠ¡è¿˜æ˜¯å¯ç”¨çš„ï¼Œå³ä½¿æ˜¯æœ‰æŸæœåŠ¡ã€‚ç³»ç»Ÿå¯ä»¥æ ¹æ®ä¸€äº›å…³é”®æ•°æ®è¿›è¡Œè‡ªåŠ¨é™çº§ï¼Œä¹Ÿå¯ä»¥é…ç½®å¼€å…³å®ç°äººå·¥é™çº§ã€‚</p>
<p>é™çº§çš„ç›®çš„æ˜¯<strong>ä¿è¯æ ¸å¿ƒæœåŠ¡å¯ç”¨</strong>ï¼Œå³ä½¿å¯èƒ½æœ‰æŸå…¶ä»–æ“ä½œã€‚æ¯”å¦‚åŒåä¸€çš„æ—¶å€™æ·˜å®è´­ç‰©è½¦æ— æ³•ä¿®æ”¹åœ°å€åªèƒ½ä½¿ç”¨é»˜è®¤åœ°å€ï¼Œè¿™ä¸ªæœåŠ¡å°±æ˜¯è¢«é™çº§äº†ï¼Œè¿™æ˜¯é˜¿é‡Œä¸ºäº†ä¿è¯è®¢å•å¯ä»¥æ­£å¸¸æäº¤å’Œä»˜æ¬¾ï¼Œä½†ä¿®æ”¹åœ°å€çš„æœåŠ¡å¯ä»¥åœ¨æœåŠ¡å™¨å‹åŠ›é™ä½ï¼Œå¹¶å‘é‡ç›¸å¯¹å‡å°‘çš„æ—¶å€™å†æ¢å¤ã€‚</p>
<h2 id="ç¼“å­˜æ›´æ–°ç­–ç•¥"><a href="#ç¼“å­˜æ›´æ–°ç­–ç•¥" class="headerlink" title="ç¼“å­˜æ›´æ–°ç­–ç•¥"></a>ç¼“å­˜æ›´æ–°ç­–ç•¥</h2><p>é™¤äº†ç¼“å­˜æœåŠ¡å™¨è‡ªå¸¦çš„ç¼“å­˜å¤±æ•ˆç­–ç•¥ä¹‹å¤–ï¼Œæ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚è¿›è¡Œè‡ªå®šä¹‰çš„ç¼“å­˜æ·˜æ±°</p>
<p><strong>å¸¸è§çš„ç­–ç•¥æœ‰ä¸¤ç§ï¼š</strong></p>
<ul>
<li><p>å®šæ—¶å»æ¸…ç†è¿‡æœŸçš„ç¼“å­˜ï¼›</p>
</li>
<li><p>å½“æœ‰ç”¨æˆ·è¯·æ±‚è¿‡æ¥æ—¶ï¼Œå†åˆ¤æ–­è¿™ä¸ªè¯·æ±‚æ‰€ç”¨åˆ°çš„ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸçš„è¯å°±å»åº•å±‚ç³»ç»Ÿå¾—åˆ°æ–°æ•°æ®å¹¶æ›´æ–°ç¼“å­˜ã€‚</p>
</li>
</ul>
<p>ä¸¤è€…å„æœ‰ä¼˜åŠ£ï¼Œç¬¬ä¸€ç§çš„ç¼ºç‚¹æ˜¯ç»´æŠ¤å¤§é‡ç¼“å­˜çš„keyæ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œç¬¬äºŒç§çš„ç¼ºç‚¹å°±æ˜¯æ¯æ¬¡ç”¨æˆ·è¯·æ±‚è¿‡æ¥éƒ½è¦åˆ¤æ–­ç¼“å­˜å¤±æ•ˆï¼Œé€»è¾‘ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼Œå…·ä½“ç”¨å“ªç§æ–¹æ¡ˆï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„åº”ç”¨åœºæ™¯æ¥æƒè¡¡ã€‚</p>
<h2 id="å¤§keyå’Œçƒ­key"><a href="#å¤§keyå’Œçƒ­key" class="headerlink" title="å¤§keyå’Œçƒ­key"></a>å¤§keyå’Œçƒ­key</h2><h3 id="çƒ­key"><a href="#çƒ­key" class="headerlink" title="çƒ­key"></a>çƒ­key</h3><p>çƒ­keyæ˜¯æœåŠ¡ç«¯çš„å¸¸è§é—®é¢˜ï¼ŒæŒ‡ä¸€æ®µæ—¶é—´å†…æŸä¸ªkeyçš„è®¿é—®é‡è¿œè¿œè¶…è¿‡å…¶ä»–çš„keyï¼Œå¯¼è‡´å¤§é‡è®¿é—®æµé‡è½åœ¨æŸä¸€ä¸ªrediså®ä¾‹ä¸­ï¼›æˆ–è€…æ˜¯å¸¦å®½ä½¿ç”¨ç‡é›†ä¸­åœ¨ç‰¹å®šçš„keyï¼ˆä¾‹å¦‚ï¼Œå¯¹ä¸€ä¸ªåŒ…å«2000ä¸ªfieldçš„hash keyæ¯ç§’å‘é€å¤§é‡çš„hgetallæ“ä½œè¯·æ±‚ï¼‰ï¼›åˆæˆ–è€…æ˜¯cpuä½¿ç”¨æ—¶é—´å æ¯”é›†ä¸­åœ¨ç‰¹å®šçš„keyï¼ˆä¾‹å¦‚ï¼Œå¯¹ä¸€ä¸ªåŒ…å«10000ä¸ªfieldçš„keyæ¯ç§’å‘é€å¤§é‡çš„zrangeæ“ä½œè¯·æ±‚ï¼‰ã€‚</p>
<p><strong>å¯èƒ½é€ æˆçš„é—®é¢˜</strong></p>
<ul>
<li>çƒ­ç‚¹ç¼“å­˜ä¼šå¯¼è‡´æµé‡é›†ä¸­ï¼Œredisç¼“å­˜ä¸<a target="_blank" rel="noopener" href="https://cloud.tencent.com/product/tencentdb-catalog?from_column=20065&amp;from=20065">æ•°æ®åº“</a>è¢«å‡»ç©¿ï¼Œä»è€Œå¼•å‘ç³»ç»Ÿé›ªå´©ã€‚</li>
<li>è¯·æ±‚åˆ†é…ä¸å‡ï¼Œå­˜åœ¨çƒ­keyçš„èŠ‚ç‚¹é¢ä¸´è¾ƒå¤§çš„è®¿é—®å‹åŠ›ï¼Œå¯èƒ½å‡ºç°è¯¥æ•°æ®åˆ†ç‰‡çš„è¿æ¥æ•°è¢«è€—å°½ç”šè‡³å®•æœºã€‚ï¼ˆå³ä½¿é‡‡å–æ‰©å®¹ä¹Ÿä¼šå¯¹èµ„æºæœ‰å¾ˆå¤§çš„æµªè´¹ï¼‰</li>
</ul>
<p><strong>å¸¸ç”¨çš„å¤„ç†æ–¹æ³•</strong></p>
<ul>
<li>çƒ­keyç»Ÿè®¡å¯ä»¥ä½¿ç”¨LFUæ•°æ®ç»“æ„å¹¶ç»“åˆä¸Šé¢çš„å‘ç°æ–¹æ³•ï¼Œå°†æœ€çƒ­topNçš„keyè¿›è¡Œç»Ÿè®¡ï¼Œç„¶ååœ¨clientç«¯ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œä»è€Œé™ä½redisé›†ç¾¤å¯¹çƒ­keyçš„è®¿é—®é‡ï¼Œä½†è¿™ç§æ–¹æ³•å¸¦æ¥ä¸¤ä¸ªé—®é¢˜ï¼š<ol>
<li>å¦‚æœå¯¹æ‰€æœ‰çƒ­keyè¿›è¡Œæœ¬åœ°ç¼“å­˜ï¼Œé‚£ä¹ˆæœ¬åœ°ç¼“å­˜æ˜¯å¦ä¼šè¿‡å¤§ï¼Œä»è€Œå½±å“åº”ç”¨ç¨‹åºæœ¬èº«çš„æ€§èƒ½å¼€é”€ã€‚</li>
<li>å¯èƒ½éœ€è¦ä¿è¯æœ¬åœ°ç¼“å­˜å’Œredisæ•°æ®çš„ä¸€è‡´æ€§ã€‚</li>
</ol>
</li>
<li>å°†çƒ­keyåŠ ä¸Šå‰ç¼€æˆ–è€…åç¼€ï¼ŒæŠŠçƒ­keyçš„æ•°é‡ä»1ä¸ªå˜æˆå®ä¾‹ä¸ªæ•°ï¼Œåˆ©ç”¨åˆ†ç‰‡ç‰¹æ€§å°†è¿™nä¸ªkeyåˆ†æ•£åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è®¿é—®çš„æ—¶å€™ï¼Œé‡‡ç”¨å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡çš„æ–¹å¼ï¼Œéšæœºé€‰æ‹©ä¸€ä¸ªkeyè¿›è¡Œè®¿é—®ï¼Œå°†è®¿é—®å‹åŠ›åˆ†æ•£åˆ°ä¸åŒçš„å®ä¾‹ä¸­ã€‚è¿™ä¸ªæ–¹æ¡ˆæœ‰ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹ï¼Œå°±æ˜¯<em>ç¼“å­˜çš„ç»´æŠ¤æˆæœ¬</em>å¤§ï¼šå‡å¦‚æœ‰nä¸º100ï¼Œåˆ™æ›´æ–°æˆ–è€…åˆ é™¤keyçš„æ—¶å€™éœ€è¦æ“ä½œ100ä¸ªkeyã€‚</li>
<li>åˆ©ç”¨è¯»å†™åˆ†ç¦»ï¼Œé€šè¿‡ä¸»ä»å¤åˆ¶çš„æ–¹å¼ï¼Œå¢åŠ slaveèŠ‚ç‚¹æ¥å®ç°è¯»è¯·æ±‚çš„è´Ÿè½½å‡è¡¡ã€‚è¿™ä¸ªæ–¹æ¡ˆæ˜æ˜¾çš„ç¼ºç‚¹å°±æ˜¯<em>ä½¿ç”¨æœºå™¨ç¡¬æŠ—çƒ­keyçš„æ•°æ®ï¼Œèµ„æºè€—è´¹ä¸¥é‡</em>ï¼›è€Œä¸”å¼•å…¥è¯»å†™åˆ†ç¦»æ¶æ„ï¼Œå¢åŠ èŠ‚ç‚¹æ•°é‡ï¼Œéƒ½ä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚åº¦é™ä½ç¨³å®šæ€§ã€‚</li>
</ul>
<h3 id="å¤§key"><a href="#å¤§key" class="headerlink" title="å¤§key"></a>å¤§key</h3><p>å¤§keyæ˜¯æŒ‡å½“redisçš„å­—ç¬¦ä¸²ç±»å‹å ç”¨å†…å­˜è¿‡å¤§æˆ–éå­—ç¬¦ä¸²ç±»å‹å…ƒç´ æ•°é‡è¿‡å¤šã€‚</p>
<p>ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œç»¼åˆè¡¡é‡è¿ç»´å’Œç¯å¢ƒçš„æƒ…å†µï¼Œç»™å¤§keyå®šä¹‰å‚è€ƒå€¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>stringç±»å‹çš„keyè¶…è¿‡10KB</li>
<li>hash/set/zset/listç­‰æ•°æ®ç»“æ„ä¸­å…ƒç´ ä¸ªæ•°å¤§äº5k/æ•´ä½“å ç”¨å†…å­˜å¤§äº10MB</li>
</ul>
<p><strong>å¯èƒ½é€ æˆçš„é—®é¢˜</strong></p>
<ul>
<li>å†…å­˜ä½¿ç”¨ä¸å‡åŒ€ã€‚</li>
<li>å“åº”æ—¶é—´ä¸Šå‡ã€è¶…æ—¶é˜»å¡ã€‚ç”±äºredisæ˜¯å•çº¿ç¨‹æ¶æ„ï¼Œæ“ä½œå¤§keyè€—æ—¶è¾ƒé•¿ï¼Œæœ‰å¯èƒ½é€ æˆredisé˜»å¡ã€‚</li>
<li>è¿‡æœŸæ—¶å¯èƒ½é˜»å¡ã€‚å¤§keyè®¾å®šäº†è¿‡æœŸæ—¶é—´ï¼Œå½“è¿‡æœŸæ—¶è¿™ä¸ªkeyä¼šè¢«åˆ é™¤ã€‚å‡å¦‚redisç‰ˆæœ¬ä½äº4.0æ²¡æœ‰éåŒæ­¥åˆ é™¤æœºåˆ¶ï¼Œå°±ä¼šå­˜åœ¨é˜»å¡redisçš„å¯èƒ½æ€§ï¼Œå¹¶ä¸”æ…¢æŸ¥è¯¢æŸ¥ä¸åˆ°ï¼›åŒæ ·ï¼Œå†…å­˜ä¸è¶³æ—¶çš„keyé©±é€æˆ–è€…æ˜¯renameä¸€ä¸ªå¤§keyä¹Ÿä¼šé˜»å¡redisæœåŠ¡ã€‚é•¿æ—¶é—´é˜»å¡ä¸»åº“ï¼Œå¯èƒ½ä¼šå¼•å‘åŒæ­¥ä¸­æ–­æˆ–ä¸»ä»åˆ‡æ¢ã€‚</li>
</ul>
<blockquote>
<p>æ…¢æŸ¥è¯¢ä¸ºä»€ä¹ˆæŸ¥ä¸åˆ°ã€‚ä¸¾ä¾‹ï¼Œå¦‚æœè¯·æ±‚è¿›æ¥ä¸”redisæœåŠ¡å™¨æ­£åœ¨è¿›è¡Œè¿‡æœŸé”®æ‰«æï¼Œéœ€è¦ç­‰å¾…100æ¯«ç§’ã€‚å½“å®¢æˆ·ç«¯è®¾ç½®çš„è¶…æ—¶æ—¶é—´å°äº100æ¯«ç§’ï¼Œé‚£å°±ä¼šå¯¼è‡´è¿æ¥å› ä¸ºè¶…æ—¶è€Œå…³é—­ï¼Œå°±ä¼šé€ æˆå¼‚å¸¸ï¼Œè¿™äº›ç°è±¡å¹¶ä¸èƒ½ä»æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­æŸ¥è¯¢åˆ°ï¼ˆå› ä¸ºæ…¢æŸ¥è¯¢åªè®°å½•é€»è¾‘å¤„ç†è¿‡ç¨‹ï¼Œä¸åŒ…æ‹¬ç­‰å¾…æ—¶é—´ï¼‰ã€‚</p>
</blockquote>
<ul>
<li>ç½‘ç»œæ‹¥å¡ã€‚</li>
</ul>
<p><strong>å¸¸ç”¨çš„å¤„ç†æ–¹æ³•</strong></p>
<ul>
<li>å¤§keyéçƒ­keyï¼Œå¦‚æœä¸æ˜¯å¿…è¦çš„ä¿¡æ¯ï¼Œå¯ä»¥ç›´æ¥åˆ é™¤delæˆ–è€…unlinkéƒ½å¯ä»¥ã€‚</li>
<li>æ•°æ®ç»“æ„ä¸Šæ‹†åˆ†ã€‚å¦‚æœå¤§keyæ˜¯ä¸ªå¤§jsonï¼Œå¯ä»¥é€šè¿‡msetçš„æ–¹å¼ï¼Œå°†è¿™ä¸ªkeyçš„å†…å®¹æ‰“æ•£åˆ°å„ä¸ªå®ä¾‹ä¸­ï¼Œå‡å°å¤§keyå¯¹æ•°æ®é‡å€¾æ–œçš„å½±å“ï¼›å¦‚æœæ˜¯å¤§listï¼Œå¯ä»¥æ‹†æˆ<code>list_1,list_2,list_N</code>ï¼›å…¶ä»–æ•°æ®ç»“æ„åŒç†ã€‚ï¼ˆå¯ä»¥è€ƒè™‘å¢åŠ å•ç‹¬keyå­˜å‚¨å¤§keyè¢«æ‹†åˆ†çš„ä¸ªæ•°æˆ–å…ƒæ•°æ®ä¿¡æ¯ï¼‰</li>
<li>åœ¨redisæ²¡æœ‰å¼€å¯éåŒæ­¥åˆ é™¤æœºåˆ¶çš„åœºæ™¯ä¸‹ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´æ—¶ï¼Œä¸€å®šè¦é¿å…å¤§æ‰¹é‡é”®åŒæ—¶è¿‡æœŸçš„ç°è±¡ã€‚</li>
<li>å¯¹äºé•¿æ–‡æœ¬ï¼Œæ›´å»ºè®®ä½¿ç”¨æ–‡æ¡£å‹æ•°æ®åº“ä¾‹å¦‚MongoDBç­‰ã€‚</li>
<li>å¯¹ä¸€è‡´æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯ï¼Œå°è¯•ä½¿ç”¨å®¢æˆ·ç«¯ç¼“å­˜ã€‚ï¼ˆåªè§£å†³äº†redisçš„é˜»å¡é—®é¢˜ï¼Œä½†æœºå™¨æˆ–å±€åŸŸç½‘çš„å¸¦å®½é—®é¢˜æ²¡æœ‰æ”¹å–„ï¼‰</li>
<li>å¯¹å¤§keyçš„å‹ç¼©ã€‚ç›¸å½“äºç”¨cpuèµ„æºæ¥é™ä½ç½‘ç»œioï¼Œå…¶ä¸­googleæå‡ºçš„snappyç®—æ³•è¾ƒå¸¸ç”¨ã€‚</li>
<li>å¯¹äºhashç­‰æ•°æ®ç»“æ„ï¼Œéœ€è¦æ³¨æ„ä¸šåŠ¡æ˜¯å¦å¯ä»¥å¼•å…¥å®šæœŸæ¸…ç†æ— æ•ˆfieldçš„æœºåˆ¶ã€‚</li>
</ul>
<h2 id="åŸºäºRediså®ç°åˆ†å¸ƒå¼é”"><a href="#åŸºäºRediså®ç°åˆ†å¸ƒå¼é”" class="headerlink" title="åŸºäºRediså®ç°åˆ†å¸ƒå¼é”"></a>åŸºäºRediså®ç°åˆ†å¸ƒå¼é”</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/asd051377305/article/details/108384490">Redisåˆ†å¸ƒå¼é”-è¿™ä¸€ç¯‡å…¨äº†è§£(Redissonå®ç°åˆ†å¸ƒå¼é”å®Œç¾æ–¹æ¡ˆ)_redissonåˆ†å¸ƒå¼é”å®ç°-CSDNåšå®¢</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1nk4y1u781/?spm_id_from=333.337.search-card.all.click&amp;vd_source=2443f4ea7c585c3029ca642665fa2f8a">ç”¨å¤§ç™½è¯çš„æ–¹å¼ï¼Œå¸¦ä½ å½»åº•ææ‡‚Redisåˆ†å¸ƒå¼é”ï¼_å“”å“©å“”å“©_bilibili</a></p>
<p>å½“ä½¿ç”¨åˆ†å¸ƒå¼é›†ç¾¤éƒ¨ç½²æ—¶ï¼ŒåŒæ­¥é”ä¼šå‡ºé—®é¢˜ï¼Œè¿™ä¸ªæ—¶å€™è¦ç”¨åˆ†å¸ƒå¼é”ã€‚</p>
<p><strong>åˆ†å¸ƒå¼é”éœ€æ»¡è¶³å››ä¸ªæ¡ä»¶</strong></p>
<p>é¦–å…ˆï¼Œä¸ºäº†ç¡®ä¿åˆ†å¸ƒå¼é”å¯ç”¨ï¼Œæˆ‘ä»¬è‡³å°‘è¦ç¡®ä¿é”çš„å®ç°åŒæ—¶æ»¡è¶³ä»¥ä¸‹å››ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li>äº’æ–¥æ€§ã€‚åœ¨ä»»æ„æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯èƒ½æŒæœ‰é”ã€‚</li>
<li>ä¸ä¼šå‘ç”Ÿæ­»é”ã€‚å³ä½¿æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯åœ¨æŒæœ‰é”çš„æœŸé—´å´©æºƒè€Œæ²¡æœ‰ä¸»åŠ¨è§£é”ï¼Œä¹Ÿèƒ½ä¿è¯åç»­å…¶ä»–å®¢æˆ·ç«¯èƒ½åŠ é”ã€‚</li>
<li>è§£é“ƒè¿˜é¡»ç³»é“ƒäººã€‚åŠ é”å’Œè§£é”å¿…é¡»æ˜¯åŒä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯è‡ªå·±ä¸èƒ½æŠŠåˆ«äººåŠ çš„é”ç»™è§£äº†ï¼Œå³ä¸èƒ½è¯¯è§£é”ã€‚</li>
<li>å…·æœ‰å®¹é”™æ€§ã€‚åªè¦å¤§å¤šæ•°RedisèŠ‚ç‚¹æ­£å¸¸è¿è¡Œï¼Œå®¢æˆ·ç«¯å°±èƒ½å¤Ÿè·å–å’Œé‡Šæ”¾é”</li>
</ol>
<h3 id="é€šè¿‡setNXå®ç°åˆ†å¸ƒå¼é”"><a href="#é€šè¿‡setNXå®ç°åˆ†å¸ƒå¼é”" class="headerlink" title="é€šè¿‡setNXå®ç°åˆ†å¸ƒå¼é”"></a>é€šè¿‡setNXå®ç°åˆ†å¸ƒå¼é”</h3><p>è®¾ç½®è¿‡æœŸæ—¶é—´é˜²æ­¢æ­»é”ï¼ˆé”æ³„éœ²ï¼Ÿ</p>
<p>é—®é¢˜ï¼š</p>
<ol>
<li>å½“é”è¿‡æœŸæ—¶çº¿ç¨‹è¿˜åœ¨å¤„ç†ä¸šåŠ¡ä¸­</li>
<li>å½“å¤„ç†å®Œé‡Šæ”¾å…¶ä»–çº¿ç¨‹çš„é”</li>
</ol>
<p>è§£å†³ï¼š</p>
<ol>
<li>åŠ é•¿æ—¶é—´ï¼Œå¹¶æ·»åŠ å­çº¿ç¨‹æ¯10ç§’ç¡®è®¤çº¿ç¨‹æ˜¯å¦åœ¨çº¿ï¼Œåœ¨çº¿åˆ™å°†è¿‡æœŸæ—¶é—´é‡è®¾ã€‚ï¼ˆçœ‹é—¨ç‹—</li>
<li>ç»™é”åŠ å”¯ä¸€ID(UUID)</li>
</ol>
<h3 id="Redisson"><a href="#Redisson" class="headerlink" title="Redisson"></a>Redisson</h3><p><code>RLock lock = redisson.getLock(LOCK_KEY);</code></p>
<p><code>lock.lock();</code></p>
<p>å¦‚æœä¸»ä»èŠ‚ç‚¹ä¸­ä¸»èŠ‚ç‚¹æŒ‚äº†ï¼Ÿï¼ˆå‡è®¾ä¸»èŠ‚ç‚¹åŠ åˆ°äº†é”ï¼Œä»èŠ‚ç‚¹è¿˜æ²¡æœ‰åŒæ­¥åˆ°ï¼‰</p>
<p>red lock é’ˆå¯¹æ‰€æœ‰èŠ‚ç‚¹åŒæ­¥ï¼Œä¿è¯å¼ºä¸€è‡´æ€§ã€‚</p>
<link rel="stylesheet" href="/css/folder.css" type="text/css"><script src="/js/folder.js" type="text/javascript" async></script>
    </article>
    <!-- license -->
    <!-- paginator -->
    <ul class="post-paginator">
        <li class="next">
                <div class="nextSlogan">Next Post</div>
                <a href="/posts/4ee3286d.html" title="Mavenæ„å»ºé—®é¢˜">
                    <div class="nextTitle">Mavenæ„å»ºé—®é¢˜</div>
                </a>
        </li>
        <li class="previous">
                <div class="prevSlogan">Previous Post</div>
                <a href="/posts/da3e1361.html" title="Mybatis">
                    <div class="prevTitle">Mybatis</div>
                </a>
        </li>
    </ul>
    <!-- comment -->
        <div class="post-comment">
            <!-- æ¥å¿…åŠ› City ç‰ˆå®‰è£…ä»£ç  -->

            
            
            
            <!-- utterancè¯„è®º -->

            <!-- partial('_partial/comment/changyan') -->
            <!--PCç‰ˆ-->

            
            
            
        </div>
    <!-- timeliness note -->
    <!-- idea from: https://hexo.fluid-dev.com/posts/hexo-injector/#%E6%96%87%E7%AB%A0%E6%97%B6%E6%95%88%E6%80%A7%E6%8F%90%E7%A4%BA -->
    <!-- Mathjax -->
</main>

                <!-- profile -->
            </div>
            <footer class="footer footer-unloaded">
    <!-- social  -->
        <div class="social">
                            <a href="mailto:limiese0zen@gmail.com" class="iconfont-archer email" title="email" ></a>
                <a href="//github.com/zennnj" class="iconfont-archer github" target="_blank" title="github"></a>
                <a href="https://steamcommunity.com/profiles/76561199557415174" class="iconfont-archer steam" target="_blank" title="steam"></a>

        </div>
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- website approve for Chinese user -->
    <!-- ä¸è’œå­  -->
        <div class="busuanzi-container">
                <span id="busuanzi_container_site_pv">PV: <span id="busuanzi_value_site_pv"></span> :)</span>
        </div>
</footer>

        </div>
        <!-- toc -->
            <div class="toc-wrapper toc-wrapper-loding" style=    top:50vh;
>
                <div class="toc-catalog">
                    <span class="iconfont-archer catalog-icon">&#xe613;</span><span>CATALOG</span>
                </div>
                <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">ä»‹ç»</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#REDIS-AND-MYSQL"><span class="toc-number">1.1.</span> <span class="toc-text">REDIS AND MYSQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9D%971-Redis-%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%8D%E5%8F%AF%E9%9D%A0%EF%BC%8C%E4%B8%8D%E8%83%BD%E4%BF%9D%E8%AF%81%E4%B8%8D%E4%B8%A2"><span class="toc-number">1.1.1.</span> <span class="toc-text">â—1. Redis çš„æ•°æ®ä¸å¯é ï¼Œä¸èƒ½ä¿è¯ä¸ä¸¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9D%972-Redis-%E5%90%8C%E6%A0%B7%E5%8F%AF%E4%BB%A5%E5%AE%95%E6%9C%BA-%E5%B4%A9%E6%BA%83"><span class="toc-number">1.1.2.</span> <span class="toc-text">â—2. Redis åŒæ ·å¯ä»¥å®•æœº &#x2F; å´©æºƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9D%973-%E5%86%85%E5%AD%98%E6%88%90%E6%9C%AC%E8%BF%9C%E6%AF%94%E7%A1%AC%E7%9B%98%E9%AB%98%E5%BE%97%E7%A6%BB%E8%B0%B1"><span class="toc-number">1.1.3.</span> <span class="toc-text">â—3. å†…å­˜æˆæœ¬è¿œæ¯”ç¡¬ç›˜é«˜å¾—ç¦»è°±</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9D%974-Redis-%E7%BC%BA%E4%B9%8F%E5%85%B3%E7%B3%BB%E6%9F%A5%E8%AF%A2%E8%83%BD%E5%8A%9B"><span class="toc-number">1.1.4.</span> <span class="toc-text">â—4. Redis ç¼ºä¹å…³ç³»æŸ¥è¯¢èƒ½åŠ›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%8C-%E4%BD%BF%E7%94%A8-Redis%E7%9A%84%E5%9C%BA%E5%90%88"><span class="toc-number">1.1.5.</span> <span class="toc-text">ğŸ“Œ ä½¿ç”¨ Redisçš„åœºåˆ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">å®‰è£…é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.1.</span> <span class="toc-text">å¯åŠ¨æœåŠ¡å™¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RedisInsight"><span class="toc-number">2.2.</span> <span class="toc-text">RedisInsight</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">3.</span> <span class="toc-text">åŸºæœ¬æ•°æ®ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2string"><span class="toc-number">3.1.</span> <span class="toc-text">å­—ç¬¦ä¸²string</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8"><span class="toc-number">3.2.</span> <span class="toc-text">åˆ—è¡¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E5%90%88"><span class="toc-number">3.3.</span> <span class="toc-text">é›†åˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88"><span class="toc-number">3.4.</span> <span class="toc-text">æœ‰åºé›†åˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%88%E5%B8%8C"><span class="toc-number">3.5.</span> <span class="toc-text">å“ˆå¸Œ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">4.</span> <span class="toc-text">é€šç”¨å‘½ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.1.</span> <span class="toc-text">å‘å¸ƒè®¢é˜…æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97Stream"><span class="toc-number">4.2.</span> <span class="toc-text">æ¶ˆæ¯é˜Ÿåˆ—Stream</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%B0%E7%90%86%E7%A9%BA%E9%97%B4Geospatial"><span class="toc-number">4.3.</span> <span class="toc-text">åœ°ç†ç©ºé—´Geospatial</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HyperLogLog"><span class="toc-number">4.4.</span> <span class="toc-text">HyperLogLog</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bitmap"><span class="toc-number">4.5.</span> <span class="toc-text">Bitmap</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%8D%E5%9F%9FBitfield"><span class="toc-number">4.6.</span> <span class="toc-text">ä½åŸŸBitfield</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-number">4.7.</span> <span class="toc-text">å…¶ä»–</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis-Java-%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">5.</span> <span class="toc-text">Redis Java å®¢æˆ·ç«¯</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%96%B9%E6%B3%95"><span class="toc-number">5.1.</span> <span class="toc-text">è¿æ¥æ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis%E4%BA%8B%E5%8A%A1"><span class="toc-number">6.</span> <span class="toc-text">Redisäº‹åŠ¡</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-number">7.</span> <span class="toc-text">RedisæŒä¹…åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#RDB-Redis-Database"><span class="toc-number">7.1.</span> <span class="toc-text">RDB(Redis Database)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOF-Append-Only-File"><span class="toc-number">7.2.</span> <span class="toc-text">AOF(Append Only File)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6"><span class="toc-number">8.</span> <span class="toc-text">ä¸»ä»å¤åˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">8.1.</span> <span class="toc-text">é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F1%EF%BC%9A%E9%80%9A%E8%BF%87%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4-%E4%B8%8D%E5%B8%B8%E7%94%A8"><span class="toc-number">8.1.1.</span> <span class="toc-text">æ–¹å¼1ï¼šé€šè¿‡å‘½ä»¤è¡Œæ‰§è¡Œå‘½ä»¤(ä¸å¸¸ç”¨)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F2%EF%BC%9A%E9%80%9A%E8%BF%87%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">8.1.2.</span> <span class="toc-text">æ–¹å¼2ï¼šé€šè¿‡é…ç½®æ–‡ä»¶</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8FSentinel"><span class="toc-number">9.</span> <span class="toc-text">å“¨å…µæ¨¡å¼Sentinel</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%87%E6%9C%9F%E7%AD%96%E7%95%A5%E5%92%8C%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5"><span class="toc-number">10.</span> <span class="toc-text">è¿‡æœŸç­–ç•¥å’Œæ·˜æ±°ç­–ç•¥</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A2%AB%E5%8A%A8%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5"><span class="toc-number">10.1.</span> <span class="toc-text">è¢«åŠ¨åˆ é™¤ç­–ç•¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E5%8A%A8%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5"><span class="toc-number">10.2.</span> <span class="toc-text">ä¸»åŠ¨åˆ é™¤ç­–ç•¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E7%AD%96%E7%95%A5Enviction"><span class="toc-number">10.3.</span> <span class="toc-text">é»˜è®¤ç­–ç•¥Enviction</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%9C%BA%E6%99%AF%E9%97%AE%E9%A2%98"><span class="toc-number">11.</span> <span class="toc-text">å¸¸è§åœºæ™¯é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E5%87%BB%E7%A9%BF%E3%80%81%E9%9B%AA%E5%B4%A9"><span class="toc-number">11.1.</span> <span class="toc-text">ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F"><span class="toc-number">11.1.1.</span> <span class="toc-text">ç¼“å­˜ç©¿é€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF"><span class="toc-number">11.1.2.</span> <span class="toc-text">ç¼“å­˜å‡»ç©¿</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9"><span class="toc-number">11.2.</span> <span class="toc-text">ç¼“å­˜é›ªå´©</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E7%9A%84%E9%A2%84%E7%83%AD%E5%92%8C%E9%99%8D%E7%BA%A7"><span class="toc-number">11.3.</span> <span class="toc-text">ç¼“å­˜çš„é¢„çƒ­å’Œé™çº§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E9%A2%84%E7%83%AD"><span class="toc-number">11.3.1.</span> <span class="toc-text">ç¼“å­˜é¢„çƒ­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E9%99%8D%E7%BA%A7"><span class="toc-number">11.3.2.</span> <span class="toc-text">ç¼“å­˜é™çº§</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E6%9B%B4%E6%96%B0%E7%AD%96%E7%95%A5"><span class="toc-number">11.4.</span> <span class="toc-text">ç¼“å­˜æ›´æ–°ç­–ç•¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%A7key%E5%92%8C%E7%83%ADkey"><span class="toc-number">11.5.</span> <span class="toc-text">å¤§keyå’Œçƒ­key</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%83%ADkey"><span class="toc-number">11.5.1.</span> <span class="toc-text">çƒ­key</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7key"><span class="toc-number">11.5.2.</span> <span class="toc-text">å¤§key</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8ERedis%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81"><span class="toc-number">11.6.</span> <span class="toc-text">åŸºäºRediså®ç°åˆ†å¸ƒå¼é”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87setNX%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81"><span class="toc-number">11.6.1.</span> <span class="toc-text">é€šè¿‡setNXå®ç°åˆ†å¸ƒå¼é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redisson"><span class="toc-number">11.6.2.</span> <span class="toc-text">Redisson</span></a></li></ol></li></ol></li></ol>
            </div>
        <!-- sidebar -->
        <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
        <div class="sidebar-panel-archives">
    <!-- åœ¨ ejs ä¸­å°† archive æŒ‰ç…§æ—¶é—´æ’åº -->
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    <div class="total-and-search">
        <div class="total-archive">
        Total : 32
        </div>
        <!-- search  -->
    </div>
    <div class="post-archive">
            <div class="archive-year"> 2025 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">12/11</span>
            <a class="archive-post-title" href="/posts/5d2bcff8.html">Mybatis-Plus</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">12/03</span>
            <a class="archive-post-title" href="/posts/a477be03.html">nginx</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">11/28</span>
            <a class="archive-post-title" href="/posts/b5385ca.html">temp</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">11/27</span>
            <a class="archive-post-title" href="/posts/4ac3e81c.html">æš‘å‡å°ç»“</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">11/24</span>
            <a class="archive-post-title" href="/posts/4618cb0a.html">å¾®ä¿¡å°ç¨‹åº</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">10/18</span>
            <a class="archive-post-title" href="/posts/f5f9fa9b.html">Docker</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">10/16</span>
            <a class="archive-post-title" href="/posts/9a7d5a13.html">Kafka</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/28</span>
            <a class="archive-post-title" href="/posts/26c51008.html">ç®€å•shellè„šæœ¬</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/10</span>
            <a class="archive-post-title" href="/posts/e6495409.html">å¯’å‡æ¸¸ä¹å°ç»“</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/02</span>
            <a class="archive-post-title" href="/posts/4ee3286d.html">Mavenæ„å»ºé—®é¢˜</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/30</span>
            <a class="archive-post-title" href="/posts/bae4ff13.html">Redis</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/22</span>
            <a class="archive-post-title" href="/posts/da3e1361.html">Mybatis</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">03/08</span>
            <a class="archive-post-title" href="/posts/5751eea2.html">C++</a>
        </li>
                </ul>
            <div class="archive-year"> 2024 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">12/12</span>
            <a class="archive-post-title" href="/posts/79666db.html">æ•°æ®ç»“æ„</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">11/10</span>
            <a class="archive-post-title" href="/posts/a541262a.html">Spring Boot</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">11/10</span>
            <a class="archive-post-title" href="/posts/74add858.html">Gitä½¿ç”¨æŒ‡å—</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">11/09</span>
            <a class="archive-post-title" href="/posts/12634.html">æœ¬ç«™ä½¿ç”¨çš„æ’ä»¶</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">11/03</span>
            <a class="archive-post-title" href="/posts/50460.html">åšé¢˜è®°å½•ä¸²</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">10/26</span>
            <a class="archive-post-title" href="/posts/56743.html">unity</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">10/25</span>
            <a class="archive-post-title" href="/posts/59760.html">C#</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">10/19</span>
            <a class="archive-post-title" href="/posts/3629.html">ç¼–ç¨‹ç»†èŠ‚è®°å½•</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">10/13</span>
            <a class="archive-post-title" href="/posts/58846.html">Javaå¤šçº¿ç¨‹</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/28</span>
            <a class="archive-post-title" href="/posts/17374.html">JVM</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/26</span>
            <a class="archive-post-title" href="/posts/9977.html">MySQL</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/11</span>
            <a class="archive-post-title" href="/posts/40121.html">JAVA</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/11</span>
            <a class="archive-post-title" href="/posts/41682.html">è®¾è®¡æ¨¡å¼</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/11</span>
            <a class="archive-post-title" href="/posts/7165.html">Githubè®¿é—®è¿æ¥å¤±è´¥é—®é¢˜</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/11</span>
            <a class="archive-post-title" href="/posts/28758.html">è®¡ç®—æœºç½‘ç»œ</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/10</span>
            <a class="archive-post-title" href="/posts/15691.html">Linux</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/10</span>
            <a class="archive-post-title" href="/posts/31602.html">åç«¯</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">08/31</span>
            <a class="archive-post-title" href="/posts/12966.html">ä¸Šå­¦å‰çš„é—è¨€</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/24</span>
            <a class="archive-post-title" href="/posts/37559.html">ä¸ªäººç”¨ä½¿ç”¨æŒ‡å—</a>
        </li>
            </ul>
    </div>
</div>

        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
            <span class="sidebar-tag-name" data-tags="learn">
                <span class="iconfont-archer">&#xe606;</span>
                learn
            </span>
            <span class="sidebar-tag-name" data-tags="problems">
                <span class="iconfont-archer">&#xe606;</span>
                problems
            </span>
            <span class="sidebar-tag-name" data-tags="ç¢ç¢å¿µ">
                <span class="iconfont-archer">&#xe606;</span>
                ç¢ç¢å¿µ
            </span>
            <span class="sidebar-tag-name" data-tags="practice">
                <span class="iconfont-archer">&#xe606;</span>
                practice
            </span>
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
        ç¼ºå¤±æ¨¡å—ï¼Œè¯·å‚è€ƒä¸»é¢˜æ–‡æ¡£è¿›è¡Œå®‰è£…é…ç½®ï¼šhttps://github.com/fi3ework/hexo-theme-archer#%E5%AE%89%E8%A3%85%E4%B8%BB%E9%A2%98
    </div> 
    <div class="sidebar-tags-list"></div>
</div>

        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
        <span class="sidebar-category-name" data-categories="è¯­è¨€æ‹“å±•">
            <span class="iconfont-archer">&#xe60a;</span>
            è¯­è¨€æ‹“å±•
        </span>
        <span class="sidebar-category-name" data-categories="unity">
            <span class="iconfont-archer">&#xe60a;</span>
            unity
        </span>
        <span class="sidebar-category-name" data-categories="ç³»ç»ŸæŠ€æœ¯">
            <span class="iconfont-archer">&#xe60a;</span>
            ç³»ç»ŸæŠ€æœ¯
        </span>
        <span class="sidebar-category-name" data-categories="æ‚é¡¹">
            <span class="iconfont-archer">&#xe60a;</span>
            æ‚é¡¹
        </span>
        <span class="sidebar-category-name" data-categories="åç«¯">
            <span class="iconfont-archer">&#xe60a;</span>
            åç«¯
        </span>
        <span class="sidebar-category-name" data-categories="æ•°æ®åº“">
            <span class="iconfont-archer">&#xe60a;</span>
            æ•°æ®åº“
        </span>
        <span class="sidebar-category-name" data-categories="å‰ç«¯">
            <span class="iconfont-archer">&#xe60a;</span>
            å‰ç«¯
        </span>
        <span class="sidebar-category-name" data-categories="chat">
            <span class="iconfont-archer">&#xe60a;</span>
            chat
        </span>
        <span class="sidebar-category-name" data-categories="secrets">
            <span class="iconfont-archer">&#xe60a;</span>
            secrets
        </span>
        <span class="sidebar-category-name" data-categories="ç®—æ³•">
            <span class="iconfont-archer">&#xe60a;</span>
            ç®—æ³•
        </span>
        <span class="sidebar-category-name" data-categories="æŒ‡å—">
            <span class="iconfont-archer">&#xe60a;</span>
            æŒ‡å—
        </span>
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>

    </div>
</div>

        <!-- site-meta -->
        <script>
    var siteMetaRoot = "/"
    if (siteMetaRoot === "undefined") {
        siteMetaRoot = '/'
    }
    var siteMeta = {
        url: "http://example.com",
        root: siteMetaRoot,
        author: ""
    }
</script>

        <!-- import experimental options here -->
        <!-- Custom Font -->

        <!-- main func -->
        <script src="/scripts/main.js"></script>
        <!-- fancybox -->
        <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.36/dist/fancybox/fancybox.umd.js" onload="window.Fancybox.bind('[data-fancybox]')" defer></script>
        <!-- algolia -->
        <!-- busuanzi -->
            <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>
        <!-- async load share.js -->
            <script src="/scripts/share.js" async></script>
        <!-- mermaid -->
    <!-- hexo injector body_end start --><script src="https://fastly.jsdelivr.net/npm/hexo-tag-common@0.2.0/js/index.js"></script><!-- hexo injector body_end end --></body>
</html>
